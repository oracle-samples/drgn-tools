<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>API Reference &#8212; drgn-tools v0.5.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=4f649999" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=039e1c02" />
    <script src="_static/documentation_options.js?v=421b0634"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="icon" href="_static/drgn-tools.png"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Changelog" href="changelog.html" />
    <link rel="prev" title="Contributing: Testing" href="testing.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="api-reference">
<h1>API Reference<a class="headerlink" href="#api-reference" title="Link to this heading">¶</a></h1>
<section id="module-drgn_tools.bt">
<span id="drgn-tools-bt"></span><h2>drgn_tools.bt<a class="headerlink" href="#module-drgn_tools.bt" title="Link to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.bt.bt">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.bt.</span></span><span class="sig-name descname"><span class="pre">bt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task_or_prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cpu</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_vars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_absent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retframes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.bt.bt" title="Link to this definition">¶</a></dt>
<dd><p>Format a crash-like stack trace.</p>
<p>This formats a stack trace reminiscent of (but not strictly identical to)
the crash “bt” command. The function can be called in several ways, to
maximize flexibility. The first argument may be a task struct or pt_regs
object, or it may be a <a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Thread" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">drgn.Thread</span></code></a> representing a task. Finally,
it can be a <a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">drgn.Program</span></code></a>, in which case you need to provide a CPU
or PID number as an argument. Here are some examples:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">task</span> <span class="o">=</span> <span class="n">get_some_task_struct</span><span class="p">(</span><span class="n">prog</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bt</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bt</span><span class="p">(</span><span class="n">prog</span><span class="o">.</span><span class="n">thread</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bt</span><span class="p">(</span><span class="n">prog</span><span class="p">,</span> <span class="n">cpu</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">...</span>
</pre></div>
</div>
<p>Not all of crash’s bt features are yet implemented, but there is one
feature which already surpasses crash’s implementation: printing variable
values. When enabled, at each stack frame there will be a listing of each
local variable or function arg, and its value. The value may be “absent” if
it was optimized out or if the compiler/debuginfo is not able to provide
enough information to retrieve it.</p>
<p>This helper also mitigates some issues seen with drgn’s built-in stack
trace functionality: sometimes, the stack trace is truncated (typically at
a page fault or IRQ boundary). This helper will detect this and “expand” the
stack trace by searching for the last <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">pt_regs</span></code> variable in it. The
helper will print all relevant stack traces. See <a class="reference internal" href="#drgn_tools.bt.expand_traces" title="drgn_tools.bt.expand_traces"><code class="xref py py-func docutils literal notranslate"><span class="pre">expand_traces()</span></code></a>,
<a class="reference internal" href="#drgn_tools.bt.expand_frames" title="drgn_tools.bt.expand_frames"><code class="xref py py-func docutils literal notranslate"><span class="pre">expand_frames()</span></code></a>, and <a class="reference internal" href="#drgn_tools.bt.bt_frames" title="drgn_tools.bt.bt_frames"><code class="xref py py-func docutils literal notranslate"><span class="pre">bt_frames()</span></code></a> for ways to use this logic
without needing to print the stack trace.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>task_or_prog</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>, <a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Thread" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Thread</span></code></a>, <a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>]) – Either a task struct pointer, a <a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Thread" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">drgn.Thread</span></code></a>
object, or a <a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">drgn.Program</span></code></a>.</p></li>
<li><p><strong>cpu</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>]) – The CPU number to backtrace (only used when <code class="docutils literal notranslate"><span class="pre">task_or_prog</span></code> is
a <a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">drgn.Program</span></code></a>). Mutually exclusive with <code class="docutils literal notranslate"><span class="pre">pid</span></code>.</p></li>
<li><p><strong>pid</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>]) – The PID to backtrace (only used when <code class="docutils literal notranslate"><span class="pre">task_or_prog</span></code> is a
<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">drgn.Program</span></code></a>). Mutually exclusive with <code class="docutils literal notranslate"><span class="pre">cpu</span></code>.</p></li>
<li><p><strong>show_vars</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – Whether to enable formatting variables for each frame.</p></li>
<li><p><strong>show_absent</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – When show_vars=True, this can further expand the output
to include absent variables. Normally there’s no reason to see this, since
absent variables have no information.</p></li>
<li><p><strong>retframes</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – When true, returns a list of stack frames.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.StackFrame" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">StackFrame</span></code></a>]]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A list of the stack frames which were printed. This can be useful
for accessing the variables out of the frames interactively. If you’re
writing a script that needs to access frames, you may want to consider the
other functions in this module, which do not print the frames.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.bt.bt_frames">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.bt.</span></span><span class="sig-name descname"><span class="pre">bt_frames</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task_or_prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cpu</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.bt.bt_frames" title="Link to this definition">¶</a></dt>
<dd><p>Return the stack frames that <a class="reference internal" href="#drgn_tools.bt.bt" title="drgn_tools.bt.bt"><code class="xref py py-func docutils literal notranslate"><span class="pre">bt()</span></code></a> would print</p>
<p>This takes mostly the same args as <a class="reference internal" href="#drgn_tools.bt.bt" title="drgn_tools.bt.bt"><code class="xref py py-func docutils literal notranslate"><span class="pre">bt()</span></code></a>, but it doesn’t print
anything. It just returns the frames.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.StackFrame" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">StackFrame</span></code></a>]</p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>task_or_prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><em>Object</em></a><em> | </em><a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Thread" title="(in drgn v0.0.24+47.gff2a395)"><em>Thread</em></a><em> | </em><a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><em>Program</em></a>) – </p></li>
<li><p><strong>cpu</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a><em> | </em><em>None</em>) – </p></li>
<li><p><strong>pid</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a><em> | </em><em>None</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.bt.expand_frames">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.bt.</span></span><span class="sig-name descname"><span class="pre">expand_frames</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trace</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.bt.expand_frames" title="Link to this definition">¶</a></dt>
<dd><p>Return the frames of an expanded stack trace, flattened to a single list.</p>
<p>This is almost the same as <a class="reference internal" href="#drgn_tools.bt.expand_traces" title="drgn_tools.bt.expand_traces"><code class="xref py py-func docutils literal notranslate"><span class="pre">expand_traces()</span></code></a>, except that it returns
the frames in a single list, which is easier to access if you have run
<a class="reference internal" href="#drgn_tools.bt.bt" title="drgn_tools.bt.bt"><code class="xref py py-func docutils literal notranslate"><span class="pre">bt()</span></code></a> and you are looking to simply access the correct frame index.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>trace</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.StackTrace" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">StackTrace</span></code></a>) – A stack trace to expand</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.StackFrame" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">StackFrame</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A list of stack frames</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.bt.expand_traces">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.bt.</span></span><span class="sig-name descname"><span class="pre">expand_traces</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trace</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.bt.expand_traces" title="Link to this definition">¶</a></dt>
<dd><p>Given a stack trace, return all stack segments we can find.</p>
<p>A stack segment would be something like an interrupt stack or NMI. It is
possible to have multiple kernel stacks: for instance, a system call, which
is interrupted, and then a NMI. Sometimes drgn doesn’t get all of these in
one stack trace, and we need to search for additional stack segments by
finding a pt_regs variable on the stack. This function returns as many as
possible.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.StackTrace" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">StackTrace</span></code></a>]</p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>trace</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.StackTrace" title="(in drgn v0.0.24+47.gff2a395)"><em>StackTrace</em></a>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.bt.find_pt_regs">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.bt.</span></span><span class="sig-name descname"><span class="pre">find_pt_regs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">trace</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.bt.find_pt_regs" title="Link to this definition">¶</a></dt>
<dd><p>Given a stack trace, return the last pt_regs variable found, if any.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>]</p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>trace</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.StackTrace" title="(in drgn v0.0.24+47.gff2a395)"><em>StackTrace</em></a>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.bt.frame_name">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.bt.</span></span><span class="sig-name descname"><span class="pre">frame_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frame</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.bt.frame_name" title="Link to this definition">¶</a></dt>
<dd><p>Return a suitable name for a stack frame</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><em>Program</em></a>) – </p></li>
<li><p><strong>frame</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.StackFrame" title="(in drgn v0.0.24+47.gff2a395)"><em>StackFrame</em></a>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.bt.is_pt_regs">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.bt.</span></span><span class="sig-name descname"><span class="pre">is_pt_regs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">type_</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.bt.is_pt_regs" title="Link to this definition">¶</a></dt>
<dd><p>Determine whether a type refers to struct pt_regs, (pointer or direct)</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>type_</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Type" title="(in drgn v0.0.24+47.gff2a395)"><em>Type</em></a>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.bt.print_frames">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.bt.</span></span><span class="sig-name descname"><span class="pre">print_frames</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trace</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_vars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_absent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.bt.print_frames" title="Link to this definition">¶</a></dt>
<dd><p>Print stack frames using the drgn-tools (crash-like) format</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – Program - necessary because a list of frames has no reference
to the program they are from.</p></li>
<li><p><strong>trace</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.StackTrace" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">StackTrace</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.StackFrame" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">StackFrame</span></code></a>]]) – The stack trace or list of frames to print</p></li>
<li><p><strong>show_vars</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – True if you want to show variables</p></li>
<li><p><strong>show_absent</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – True if you further want to show absent variables</p></li>
<li><p><strong>start_idx</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Start_idx<span class="colon">:</span></dt>
<dd class="field-even"><p>Where to start counting the frame indices from</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.bt.print_task_header">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.bt.</span></span><span class="sig-name descname"><span class="pre">print_task_header</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.bt.print_task_header" title="Link to this definition">¶</a></dt>
<dd><p>Given a task struct, print the header line of the stack trace.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>task</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><em>Object</em></a>) – </p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-drgn_tools.task">
<span id="drgn-tools-task"></span><h2>drgn_tools.task<a class="headerlink" href="#module-drgn_tools.task" title="Link to this heading">¶</a></h2>
<p>Helpers related to accessing fields of task_struct in a compatible way.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">task_struct</span></code> is a constantly evolving struct, and it can be
impacted by many configuration options. This module aims to help paper over
those many differences so your code will run on a variety of kernel versions
and configurations.</p>
<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.task.get_current_run_time">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.task.</span></span><span class="sig-name descname"><span class="pre">get_current_run_time</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cpu</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.task.get_current_run_time" title="Link to this definition">¶</a></dt>
<dd><p>Get running duration of the current task on some cpu</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – drgn program</p></li>
<li><p><strong>cpu</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) – cpu index</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>duration in ns granularity</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.task.get_current_task">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.task.</span></span><span class="sig-name descname"><span class="pre">get_current_task</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cpu</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.task.get_current_task" title="Link to this definition">¶</a></dt>
<dd><p>Get current task of a cpu</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – drgn program</p></li>
<li><p><strong>cpu</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) – cpu index</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">task_struct</span> <span class="pre">*</span></code> for current task of cpu</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.task.get_runq_lag">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.task.</span></span><span class="sig-name descname"><span class="pre">get_runq_lag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cpunum</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.task.get_runq_lag" title="Link to this definition">¶</a></dt>
<dd><p>Get time lag of given CPU’s runq clock, relative to most recent runq
timestamp</p>
<p>A CPU’s runq clock may be lagging due to reasons such as dyntick idle,
missing sched tick updates etc.
This helper can be used in cases where we need to make sure that a cpu’s
runq clock is uptodate.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – drgn program</p></li>
<li><p><strong>cpunum</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) – cpu index</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>lag amount in ns granularity</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.task.get_task_arrival_time">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.task.</span></span><span class="sig-name descname"><span class="pre">get_task_arrival_time</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.task.get_task_arrival_time" title="Link to this definition">¶</a></dt>
<dd><p>Get a task’s arrival time on cpu</p>
<p>A task’s arrival time is only updated when the task is put ON a cpu via
context_switch.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>task</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">task_struct</span> <span class="pre">*</span></code></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>arrival time instance in ns granularity</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.task.nanosecs_to_secs">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.task.</span></span><span class="sig-name descname"><span class="pre">nanosecs_to_secs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nanosecs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.task.nanosecs_to_secs" title="Link to this definition">¶</a></dt>
<dd><p>Convert from nanosecs to secs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>nanosecs</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) – time duration in nano secs</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>time duration in secs</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.task.runq_clock">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.task.</span></span><span class="sig-name descname"><span class="pre">runq_clock</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cpu</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.task.runq_clock" title="Link to this definition">¶</a></dt>
<dd><p>Get clock of cpu runqueue <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rq</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – drgn program</p></li>
<li><p><strong>cpu</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) – cpu index</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>cpu runqueue clock in ns granularity</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.task.task_cpu">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.task.</span></span><span class="sig-name descname"><span class="pre">task_cpu</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.task.task_cpu" title="Link to this definition">¶</a></dt>
<dd><p>Return the CPU on which a task is running.</p>
<p>This is an equivalent to the kernel function <code class="docutils literal notranslate"><span class="pre">task_cpu()</span></code>, but it covers
a wide variety of variations in kernel version and configuration. It would
be a bit impractical to spell out all the variants, but essentially, if
there’s a “cpu” field in <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">task_struct</span></code>, then we can just use that.
Otherwise, we need to get it from the <code class="docutils literal notranslate"><span class="pre">thread_info</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>task</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – Object of type <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">task_struct</span> <span class="pre">*</span></code></p>
</dd>
<dt class="field-even">Retruns<span class="colon">:</span></dt>
<dd class="field-even"><p>The cpu as a Python int</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.task.task_lastrun2now">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.task.</span></span><span class="sig-name descname"><span class="pre">task_lastrun2now</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.task.task_lastrun2now" title="Link to this definition">¶</a></dt>
<dd><p>Get the duration from task last run timestamp to now</p>
<p>The return duration will cover task’s last run time on cpu and also
the time staying in current status, usually the time slice for task
on cpu will be short, so this can roughly tell how long this task
has been staying in current status.
For task status in “RU” status, if it’s still on cpu, then this return
the duration time this task has been running, otherwise it roughly tell
how long this task has been staying in runqueue.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prog</strong> – drgn program</p></li>
<li><p><strong>task</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">task_struct</span> <span class="pre">*</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>duration in ns granularity</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.task.task_thread_info">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.task.</span></span><span class="sig-name descname"><span class="pre">task_thread_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.task.task_thread_info" title="Link to this definition">¶</a></dt>
<dd><p>Return a task’s <code class="docutils literal notranslate"><span class="pre">thread_info</span></code></p>
<p>This is an equivalent to the kernel function / inline / macro
<code class="docutils literal notranslate"><span class="pre">task_thread_info()</span></code>, but it must cover a wide variety of versions and
configurations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>task</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – Object of type <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">task_struct</span> <span class="pre">*</span></code></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">thread_info</span> <span class="pre">*</span></code> for this task</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-drgn_tools.util">
<span id="drgn-tools-util"></span><h2>drgn_tools.util<a class="headerlink" href="#module-drgn_tools.util" title="Link to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="drgn_tools.util.SimpleProgress">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">drgn_tools.util.</span></span><span class="sig-name descname"><span class="pre">SimpleProgress</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">desc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">total_bytes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quiet</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">update_every</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">notty_update_every</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.util.SimpleProgress" title="Link to this definition">¶</a></dt>
<dd><p>A simple download progress reporter</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>desc</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – </p></li>
<li><p><strong>total_bytes</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><em>float</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a>) – </p></li>
<li><p><strong>quiet</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><em>bool</em></a>) – </p></li>
<li><p><strong>update_every</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><em>float</em></a>) – </p></li>
<li><p><strong>notty_update_every</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><em>float</em></a>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.util.cpumask_to_cpulist">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.util.</span></span><span class="sig-name descname"><span class="pre">cpumask_to_cpulist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cpumask</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.util.cpumask_to_cpulist" title="Link to this definition">¶</a></dt>
<dd><p>Get list of CPUs, present in a cpumask.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>cpumask</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">cpumask*</span></code></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>list of CPUs as string</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.util.enum_flags_str">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.util.</span></span><span class="sig-name descname"><span class="pre">enum_flags_str</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flags</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.util.enum_flags_str" title="Link to this definition">¶</a></dt>
<dd><p>Convert enum flag bit to string</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – drgn program</p></li>
<li><p><strong>t</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – enum type as string</p></li>
<li><p><strong>flags</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) – flags to be decoded</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>enum bit string or hex mode of ‘param flags’ if ‘param t’ doesn’t exist</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.util.enum_name_get">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.util.</span></span><span class="sig-name descname"><span class="pre">enum_name_get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">enum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.util.enum_name_get" title="Link to this definition">¶</a></dt>
<dd><p>Given an enum class and a value, return its name, or a default.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>enum</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Type</span></code></a>) – the <a class="reference external" href="https://docs.python.org/3/library/enum.html#enum.Enum" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code></a> type</p></li>
<li><p><strong>value</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>) – a value which is the same type as the enum values</p></li>
<li><p><strong>default</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – a string to use when not found</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The string name, or else the value of default</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.util.get_uts">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.util.</span></span><span class="sig-name descname"><span class="pre">get_uts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.util.get_uts" title="Link to this definition">¶</a></dt>
<dd><p>Get system and version info</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>dict of uts data</p>
</dd>
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><em>Program</em></a>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.util.has_member">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.util.</span></span><span class="sig-name descname"><span class="pre">has_member</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.util.has_member" title="Link to this definition">¶</a></dt>
<dd><p>Return true if a given object has a member with the given name.
:type obj: <a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>
:param obj: Drgn object to check
:type name: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>
:param name: string member name to check
:rtype: <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>
:returns: whether the object has a member by that name</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><em>Object</em></a>) – </p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)">bool</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.util.percpu_ref_sum">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.util.</span></span><span class="sig-name descname"><span class="pre">percpu_ref_sum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ref</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.util.percpu_ref_sum" title="Link to this definition">¶</a></dt>
<dd><p>Get the sum of percpu reference count from <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">percpu_ref</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – drgn Program</p></li>
<li><p><strong>ref</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">percpu_ref</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>sum of the percpu reference count</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.util.redirect_stdout">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.util.</span></span><span class="sig-name descname"><span class="pre">redirect_stdout</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">append</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.util.redirect_stdout" title="Link to this definition">¶</a></dt>
<dd><p>Redirect standard output to a file within the body of the context manager</p>
<p>This context manager is a safe way to run code and capture its results in a
new file. Here’s how to use it properly:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">redirect_stdout</span><span class="p">(</span><span class="s2">&quot;myfile.txt&quot;</span><span class="p">):</span>
<span class="go">        print(&quot;hello world&quot;)</span>
</pre></div>
</div>
<p>In the above example, the file <code class="docutils literal notranslate"><span class="pre">myfile.txt</span></code> will now contain the string
“hello worldn”.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – Name of the file to redirect to.</p></li>
<li><p><strong>append</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – Set this to true when you want to append, like the <code class="docutils literal notranslate"><span class="pre">&gt;&gt;</span></code>
operator. Default is false.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterator</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.TextIO" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">TextIO</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A context manager which yields the new stdout file</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.util.to_binary_units">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.util.</span></span><span class="sig-name descname"><span class="pre">to_binary_units</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">units</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.util.to_binary_units" title="Link to this definition">¶</a></dt>
<dd><p>Format a number as a simple human-readable number with units</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>num</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><em>float</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a>) – </p></li>
<li><p><strong>units</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><em>List</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em>]</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.util.type_exists">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.util.</span></span><span class="sig-name descname"><span class="pre">type_exists</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">type_</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.util.type_exists" title="Link to this definition">¶</a></dt>
<dd><p>Check whether some type exists in drgn</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – drgn program</p></li>
<li><p><strong>type</strong> – type name</p></li>
<li><p><strong>type_</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>true if exist, otherwise false</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-drgn_tools.module">
<span id="drgn-tools-module"></span><h2>drgn_tools.module<a class="headerlink" href="#module-drgn_tools.module" title="Link to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="drgn_tools.module.KernelModule">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">drgn_tools.module.</span></span><span class="sig-name descname"><span class="pre">KernelModule</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.module.KernelModule" title="Link to this definition">¶</a></dt>
<dd><p>Provides a more “object-oriented” interface to the module helpers.</p>
<p>This class wraps an object of type <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">module</span> <span class="pre">*</span></code>, and adds methods
which can be used to interact with it. For example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">km</span> <span class="o">=</span> <span class="n">KernelModule</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">prog</span><span class="p">,</span> <span class="s2">&quot;nf_nat&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">km</span>
<span class="go">KernelModule(nf_nat)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">km</span><span class="o">.</span><span class="n">address_region</span><span class="p">()</span>
<span class="go">ModuleLayout(base=Object(prog, &#39;void *&#39;, address=0xffffffffc0878580), total_size=40960, text_size=16384, ro_size=20480, ro_after_init_size=24576)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">km</span><span class="o">.</span><span class="n">init_region</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">km</span><span class="o">.</span><span class="n">percpu_region</span><span class="p">()</span>
<span class="go">(Object(prog, &#39;void *&#39;, address=0xffffffffc0878688), 0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">hex</span><span class="p">(</span><span class="n">km</span><span class="o">.</span><span class="n">address_region</span><span class="p">()</span><span class="o">.</span><span class="n">base</span> <span class="o">+</span> <span class="mi">123</span><span class="p">)</span>
<span class="go">&#39;0xffffffffc087207b&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">KernelModule</span><span class="o">.</span><span class="n">lookup_address</span><span class="p">(</span><span class="n">prog</span><span class="p">,</span> <span class="mh">0xffffffffc087207b</span><span class="p">)</span>
<span class="go">KernelModule(nf_nat)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>obj</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><em>Object</em></a>) – </p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="drgn_tools.module.KernelModule.address_region">
<span class="sig-name descname"><span class="pre">address_region</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.module.KernelModule.address_region" title="Link to this definition">¶</a></dt>
<dd><p>Return the core region of the module. See
<a class="reference internal" href="#drgn_tools.module.module_address_region" title="drgn_tools.module.module_address_region"><code class="xref py py-func docutils literal notranslate"><span class="pre">module_address_region()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#drgn_tools.module.ModuleLayout" title="drgn_tools.module.ModuleLayout"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModuleLayout</span></code></a></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Layout of the “core” (non-init) region</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="drgn_tools.module.KernelModule.all">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">all</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.module.KernelModule.all" title="Link to this definition">¶</a></dt>
<dd><p>Get an iterator of KernelModule helpers for each loaded module</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – Program being debugged</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>[<a class="reference internal" href="#drgn_tools.module.KernelModule" title="drgn_tools.module.KernelModule"><code class="xref py py-class docutils literal notranslate"><span class="pre">KernelModule</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Iterable of kernel module helpers</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="drgn_tools.module.KernelModule.build_id">
<span class="sig-name descname"><span class="pre">build_id</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.module.KernelModule.build_id" title="Link to this definition">¶</a></dt>
<dd><p>Return the build ID of this module, useful for matching debuginfo.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="drgn_tools.module.KernelModule.exports">
<span class="sig-name descname"><span class="pre">exports</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.module.KernelModule.exports" title="Link to this definition">¶</a></dt>
<dd><p>Return a list of exported (with or without GPL) symbol name &amp; address</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="drgn_tools.module.KernelModule.find">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">find</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.module.KernelModule.find" title="Link to this definition">¶</a></dt>
<dd><p>Return a KernelModule helper for <code class="docutils literal notranslate"><span class="pre">name</span></code> if present</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – Program being debugged</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference internal" href="#drgn_tools.module.KernelModule" title="drgn_tools.module.KernelModule"><code class="xref py py-class docutils literal notranslate"><span class="pre">KernelModule</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Iterable of kernel module helpers</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="drgn_tools.module.KernelModule.find_debuginfo">
<span class="sig-name descname"><span class="pre">find_debuginfo</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.module.KernelModule.find_debuginfo" title="Link to this definition">¶</a></dt>
<dd><p>Search for a debuginfo file matching this module.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code></a>]</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Path to file, or None on failure.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="drgn_tools.module.KernelModule.get_symbol">
<span class="sig-name descname"><span class="pre">get_symbol</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">addr</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.module.KernelModule.get_symbol" title="Link to this definition">¶</a></dt>
<dd><p>Lookup a symbol by address.</p>
<p>This function is intended to be used when the DWARF debuginfo for a
module is not available, but when the debuginfo for vmlinux is
available. If the module’s debuginfo is loaded, this should not be used;
instead, just rely on drgn’s built-in symbol lookup behavior.</p>
<p>Note that this function relies on the list of symbols returned by
<code class="docutils literal notranslate"><span class="pre">unified_symbols()</span></code>, the most complete list available.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>addr</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.IntegerLike" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntegerLike</span></code></a>) – Address to lookup</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A symbol name, if found</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="drgn_tools.module.KernelModule.have_debuginfo">
<span class="sig-name descname"><span class="pre">have_debuginfo</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.module.KernelModule.have_debuginfo" title="Link to this definition">¶</a></dt>
<dd><p>Determine whether debuginfo is loaded for this module.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if debuginfo exists for this module</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="drgn_tools.module.KernelModule.init_region">
<span class="sig-name descname"><span class="pre">init_region</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.module.KernelModule.init_region" title="Link to this definition">¶</a></dt>
<dd><p>Return the init memory region of the module.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference internal" href="#drgn_tools.module.ModuleLayout" title="drgn_tools.module.ModuleLayout"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModuleLayout</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="drgn_tools.module.KernelModule.is_oot">
<span class="sig-name descname"><span class="pre">is_oot</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.module.KernelModule.is_oot" title="Link to this definition">¶</a></dt>
<dd><p>Return true if the module is out of tree.</p>
<p>This is determined using the module.taints field: modules which are
tainted OOT_MODULE, PROPRIETARY_MODULE, or UNSIGNED_MODULE, could not
have come from our debuginfo RPMs, and so they are considered out of
tree. Unfortunately, OOT_MODULE itself is not enough: for some reason,
it seems that not all out-of-tree modules get that taint applied.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="drgn_tools.module.KernelModule.load_debuginfo">
<span class="sig-name descname"><span class="pre">load_debuginfo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">extract</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">need_dwarf</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.module.KernelModule.load_debuginfo" title="Link to this definition">¶</a></dt>
<dd><p>If the module’s debuginfo is not loaded, find and load it</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>extract</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – If true, attempts to extract the module</p></li>
<li><p><strong>need_dwarf</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – Currently nused, but this will avoid using CTF/BTF
when full DWARF debuginfo is required</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="drgn_tools.module.KernelModule.lookup_address">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">lookup_address</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog_or_addr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">addr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.module.KernelModule.lookup_address" title="Link to this definition">¶</a></dt>
<dd><p>Lookup the module containing this address and return the KernelModule
helper for it, if found. See <a class="reference internal" href="#drgn_tools.module.address_to_module" title="drgn_tools.module.address_to_module"><code class="xref py py-func docutils literal notranslate"><span class="pre">address_to_module()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference internal" href="#drgn_tools.module.KernelModule" title="drgn_tools.module.KernelModule"><code class="xref py py-class docutils literal notranslate"><span class="pre">KernelModule</span></code></a>]</p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>prog_or_addr</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><em>Program</em></a><em> | </em><a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><em>Object</em></a>) – </p></li>
<li><p><strong>addr</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.IntegerLike" title="(in drgn v0.0.24+47.gff2a395)"><em>IntegerLike</em></a><em> | </em><em>None</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="drgn_tools.module.KernelModule.percpu_region">
<span class="sig-name descname"><span class="pre">percpu_region</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.module.KernelModule.percpu_region" title="Link to this definition">¶</a></dt>
<dd><p>Return the percpu memory region of the module, see
<a class="reference internal" href="#drgn_tools.module.module_percpu_region" title="drgn_tools.module.module_percpu_region"><code class="xref py py-func docutils literal notranslate"><span class="pre">module_percpu_region()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code></a>[<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="drgn_tools.module.KernelModule.symbols">
<span class="sig-name descname"><span class="pre">symbols</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.module.KernelModule.symbols" title="Link to this definition">¶</a></dt>
<dd><p>Return a list of ELF symbol objects via kallsyms, and their names.</p>
<p>This function is intended to be used when the DWARF debuginfo for a
module is not available, but when the debuginfo for vmlinux is
available. If the module’s debuginfo is loaded, this should not be used;
instead, just rely on drgn’s built-in symbol lookup behavior.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please note that this only returns the symbols from the module’s
kallsyms table, and does not include any symbols from the exported
symbol list. This is usually ok, but sometimes the exports are
useful. The <code class="docutils literal notranslate"><span class="pre">`unified_symbols()</span></code> interface includes the rest, but
they are not represented as ELF symbols, instead just as names,
addresses, and sizes.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>]]</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>List of tuples: (symbol name, <code class="docutils literal notranslate"><span class="pre">Elf64_Sym</span></code> object)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="drgn_tools.module.KernelModule.unified_symbols">
<span class="sig-name descname"><span class="pre">unified_symbols</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.module.KernelModule.unified_symbols" title="Link to this definition">¶</a></dt>
<dd><p>Return a sorted list of all symbols we can find for a module.</p>
<p>This function is intended to be used when the DWARF debuginfo for a
module is not available, but when the debuginfo for vmlinux is
available. If the module’s debuginfo is loaded, this should not be used;
instead, just rely on drgn’s built-in symbol lookup behavior.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>]]</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>List of tuples: (symbol name, address, size)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="drgn_tools.module.ModuleLayout">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">drgn_tools.module.</span></span><span class="sig-name descname"><span class="pre">ModuleLayout</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">total_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ro_size</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ro_after_init_size</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.module.ModuleLayout" title="Link to this definition">¶</a></dt>
<dd><p>Represents a module’s layout in memory.</p>
<p>Module memory layout is organized into three sections. First is the text
section, which is read-only (RO). Next is the RO data section, which is
usually protected with no-execute (NX) permissions. Next is additional
data which becomes RO after init, and finally is the RW data. The below
diagram from the kernel source code demonstrates this layout (note that
for clarity, we refer to <code class="docutils literal notranslate"><span class="pre">size</span></code> as <code class="docutils literal notranslate"><span class="pre">total_size</span></code>).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">General</span> <span class="n">layout</span> <span class="n">of</span> <span class="n">module</span> <span class="ow">is</span><span class="p">:</span>
         <span class="p">[</span><span class="n">text</span><span class="p">]</span> <span class="p">[</span><span class="n">read</span><span class="o">-</span><span class="n">only</span><span class="o">-</span><span class="n">data</span><span class="p">]</span> <span class="p">[</span><span class="n">ro</span><span class="o">-</span><span class="n">after</span><span class="o">-</span><span class="n">init</span><span class="p">]</span> <span class="p">[</span><span class="n">writable</span> <span class="n">data</span><span class="p">]</span>
<span class="n">text_size</span> <span class="o">-----^</span>                <span class="o">^</span>               <span class="o">^</span>               <span class="o">^</span>
<span class="n">ro_size</span> <span class="o">------------------------|</span>               <span class="o">|</span>               <span class="o">|</span>
<span class="n">ro_after_init_size</span> <span class="o">-----------------------------|</span>               <span class="o">|</span>
<span class="n">size</span> <span class="o">-----------------------------------------------------------|</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>base</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><em>Object</em></a>) – </p></li>
<li><p><strong>total_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a>) – </p></li>
<li><p><strong>text_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a>) – </p></li>
<li><p><strong>ro_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a>) – </p></li>
<li><p><strong>ro_after_init_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="drgn_tools.module.ModuleLayout.base">
<span class="sig-name descname"><span class="pre">base</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a></em><a class="headerlink" href="#drgn_tools.module.ModuleLayout.base" title="Link to this definition">¶</a></dt>
<dd><p>The base address of the memory region, as a <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="drgn_tools.module.ModuleLayout.ro_after_init_size">
<span class="sig-name descname"><span class="pre">ro_after_init_size</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></em><a class="headerlink" href="#drgn_tools.module.ModuleLayout.ro_after_init_size" title="Link to this definition">¶</a></dt>
<dd><p>The length of the read-only memory, plus memory which is RO after init</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="drgn_tools.module.ModuleLayout.ro_size">
<span class="sig-name descname"><span class="pre">ro_size</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></em><a class="headerlink" href="#drgn_tools.module.ModuleLayout.ro_size" title="Link to this definition">¶</a></dt>
<dd><p>The length of the read-only memory (text, and RO data)</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="drgn_tools.module.ModuleLayout.text_size">
<span class="sig-name descname"><span class="pre">text_size</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></em><a class="headerlink" href="#drgn_tools.module.ModuleLayout.text_size" title="Link to this definition">¶</a></dt>
<dd><p>The length of the text section.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="drgn_tools.module.ModuleLayout.total_size">
<span class="sig-name descname"><span class="pre">total_size</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></em><a class="headerlink" href="#drgn_tools.module.ModuleLayout.total_size" title="Link to this definition">¶</a></dt>
<dd><p>The total length of the memory region.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.module.address_to_module">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.module.</span></span><span class="sig-name descname"><span class="pre">address_to_module</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog_or_addr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">addr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.module.address_to_module" title="Link to this definition">¶</a></dt>
<dd><p>Try to find the module corresponding to a memory address.</p>
<p>Search for the given address in the list of loaded kernel modules. If it
is within the address range corresponding to a kernel module, return that
module. This function searches the module’s core (normal memory) region,
the module’s init region (if present) and the module’s percpu region (if
present). Note that it’s impossible to detect memory <strong>allocated</strong> by a
particular kernel module: this function only deals with static data.</p>
<p>This helper performs a linear search of the list of modules, which could
grow quite large. As a result, the performance may suffer on repeated
lookups.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>addr</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.IntegerLike" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntegerLike</span></code></a>]) – address to lookup</p></li>
<li><p><strong>prog_or_addr</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><em>Program</em></a><em> | </em><a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><em>Object</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>if the address corresponds to a module, <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">module</span> <span class="pre">*</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.module.ensure_debuginfo">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.module.</span></span><span class="sig-name descname"><span class="pre">ensure_debuginfo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">modules</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.module.ensure_debuginfo" title="Link to this definition">¶</a></dt>
<dd><p>Ensure that the modules listed are loaded in the kernel and have
debuginfo available. If the modules are not present in the kernel or
the debuginfo cannot be loaded, return an error message.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]</p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><em>Program</em></a>) – </p></li>
<li><p><strong>modules</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><em>List</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em>]</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.module.find_module">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.module.</span></span><span class="sig-name descname"><span class="pre">find_module</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.module.find_module" title="Link to this definition">¶</a></dt>
<dd><p>Return the module with the given name
:type name: <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a>]
:param name: Module name
:rtype: <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>]
:returns: if found, <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">module</span> <span class="pre">*</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><em>Program</em></a>) – </p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.12)"><em>bytes</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><em>Object</em></a> | None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.module.for_each_module">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.module.</span></span><span class="sig-name descname"><span class="pre">for_each_module</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.module.for_each_module" title="Link to this definition">¶</a></dt>
<dd><p>Get all loaded kernel module objects in kernel</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – Program being debugged</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>[<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Iterable of <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">module</span> <span class="pre">*</span></code> objects</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.module.load_module_debuginfo">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.module.</span></span><span class="sig-name descname"><span class="pre">load_module_debuginfo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">modules</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extract</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quiet</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.module.load_module_debuginfo" title="Link to this definition">¶</a></dt>
<dd><p>Load all available debuginfo for all modules, with optional extraction</p>
<p>This function uses the normal search paths to find debuginfo (See
find_debuginfo() for details). For modules whose debuginfo is not found, if
extract is True, it attempts to extract the debuginfo from the vmlinux
repo. When strict is true, it raises an error if not all module debuginfo
could be found and loaded.</p>
<p>This function ignores all modules which are tainted as OOT_MODULE,
PROPRIETARY_MODULE, or UNSIGNED_MODULE. These modules will not be found in
the debuginfo RPMs so there’s no point in looking.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>modules</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>], <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference internal" href="#drgn_tools.module.KernelModule" title="drgn_tools.module.KernelModule"><code class="xref py py-class docutils literal notranslate"><span class="pre">KernelModule</span></code></a>]]) – list of modules to load. The list may be provided as a
list of strings, or a list of <code class="docutils literal notranslate"><span class="pre">KernelModule</span></code> objects – but they cannot
be mixed! If not provided, we fall back to loading all modules.</p></li>
<li><p><strong>extract</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – when true, attempt to extract debuginfo</p></li>
<li><p><strong>strict</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – when true, raise an exception if we couldn’t load all modules</p></li>
<li><p><strong>quiet</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – when true, silence output regarding missing or OOT modules</p></li>
<li><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><em>Program</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.module.module_address_region">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.module.</span></span><span class="sig-name descname"><span class="pre">module_address_region</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mod</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.module.module_address_region" title="Link to this definition">¶</a></dt>
<dd><p>Lookup the core memory region of a module.</p>
<p>Given a <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">module</span> <span class="pre">*</span></code>, return the address and length of its code and
data. This region ignores the “__init” data of the module; see</p>
<dl class="field-list simple">
<dt class="field-odd">Func<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">module_init_region()</span></code> to find that.</p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>mod</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – Object of type <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">module</span> <span class="pre">*</span></code></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#drgn_tools.module.ModuleLayout" title="drgn_tools.module.ModuleLayout"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModuleLayout</span></code></a></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A tuple representing the address and size of the memory, along
with the size of various protection zones within.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.module.module_build_id">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.module.</span></span><span class="sig-name descname"><span class="pre">module_build_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mod</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.module.module_build_id" title="Link to this definition">¶</a></dt>
<dd><p>Return the build ID (as a hex string) for this module.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>mod</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – Object of <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">module</span> <span class="pre">*</span></code></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Build ID as hex string</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.module.module_exports">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.module.</span></span><span class="sig-name descname"><span class="pre">module_exports</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">module</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.module.module_exports" title="Link to this definition">¶</a></dt>
<dd><p>Return a list of names and addresses from the exported symbols</p>
<p>Kernel modules may have various fields like <code class="docutils literal notranslate"><span class="pre">syms</span></code>, <code class="docutils literal notranslate"><span class="pre">gpl_syms</span></code>, etc.
These fields correspond to <strong>exported</strong> symbols, that is, the symbols for
which there was an <code class="docutils literal notranslate"><span class="pre">EXPORT_SYMBOL()</span></code> macro declared. The exported symbols
are the only ones which may be used by other modules.</p>
<p>This function returns names and addresses for each exported symbol. It
includes all symbols available, regardless of license. The symbols are
returned in sorted order by increasing address. Note that size information
is not provided by the kernel, and so it is not returned here.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>module</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – Object of <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">module</span> <span class="pre">*</span></code></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A list of address, name pairs</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.module.module_init_region">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.module.</span></span><span class="sig-name descname"><span class="pre">module_init_region</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mod</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.module.module_init_region" title="Link to this definition">¶</a></dt>
<dd><p>Lookup the init memory region of a module.</p>
<p>Given a <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">module</span> <span class="pre">*</span></code>, return the address and length of the
<code class="docutils literal notranslate"><span class="pre">__init</span></code> memory regions. This memory is typically freed after the module
is loaded, so under most circumstances, this will return None.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>mod</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – Object of type <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">module</span> <span class="pre">*</span></code></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference internal" href="#drgn_tools.module.ModuleLayout" title="drgn_tools.module.ModuleLayout"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModuleLayout</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A tuple representing the layout of the init memory</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.module.module_percpu_region">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.module.</span></span><span class="sig-name descname"><span class="pre">module_percpu_region</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mod</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.module.module_percpu_region" title="Link to this definition">¶</a></dt>
<dd><p>Lookup the percpu memory region of a module.</p>
<p>Given a <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">module</span> <span class="pre">*</span></code>, return the address and the length of the
percpu memory region. Modules may have a NULL percpu region, in which case
<code class="docutils literal notranslate"><span class="pre">(void</span> <span class="pre">*)NULL</span></code> is returned. Rarely, on kernels without <code class="docutils literal notranslate"><span class="pre">CONFIG_SMP</span></code>,
there is no percpu region at all, and this function returns <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>mod</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – Object of type <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">module</span> <span class="pre">*</span></code></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code></a>[<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>]]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A tuple containing the base address and length of the region</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.module.module_symbols">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.module.</span></span><span class="sig-name descname"><span class="pre">module_symbols</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">module</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.module.module_symbols" title="Link to this definition">¶</a></dt>
<dd><p>Return a list of ELF symbols for a module via kallsyms.</p>
<p>Kernel modules may have a <code class="docutils literal notranslate"><span class="pre">module_kallsyms</span></code> field which contains ELF
symbol objects describing all kallsyms symbols. This function accesses this
symbol information.</p>
<p>Returns a list of objects of type <code class="docutils literal notranslate"><span class="pre">Elf_Sym</span></code>. This object is a typedef to
an architecture specific type (either 64 or 32 bits), either of which
contain the same fields – see <em class="manpage">elf(5)</em> for their definition. Since
the <code class="docutils literal notranslate"><span class="pre">st_name</span></code> field is merely an index and can’t be interpreted without
the string table, this helper returns a tuple of the decoded name, and the
symbol object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>module</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – Object of <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">module</span> <span class="pre">*</span></code></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>]]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A list of name, <code class="docutils literal notranslate"><span class="pre">Elf_Sym</span></code> pairs</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.module.module_unified_symbols">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.module.</span></span><span class="sig-name descname"><span class="pre">module_unified_symbols</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">module</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.module.module_unified_symbols" title="Link to this definition">¶</a></dt>
<dd><p>Unify all sources of module symbols and return basics: name, value, length.</p>
<p>There are multiple possible sources of module symbol information: kallsyms,
exports, etc. This function unifies them all and attempts to give just basic
info. Note that in some cases, we have to infer the symbol length. This
helper does that as best it can.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>module</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – Object of <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">module</span> <span class="pre">*</span></code></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>]]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A list of (name, address, length) for each symbol. The list is in
sorted order, sorted by the address.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-drgn_tools.mm">
<span id="drgn-tools-mm"></span><h2>drgn_tools.mm<a class="headerlink" href="#module-drgn_tools.mm" title="Link to this heading">¶</a></h2>
<p>Helpers for examining the memory management subsystem.</p>
<dl class="py class">
<dt class="sig sig-object py" id="drgn_tools.mm.AddrKind">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">drgn_tools.mm.</span></span><span class="sig-name descname"><span class="pre">AddrKind</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.mm.AddrKind" title="Link to this definition">¶</a></dt>
<dd><p>An enumeration of possible virtual memory address kinds.</p>
<p>The kernel can have a huge variety of kinds of memory: percpu data,
memory for device I/O, read-only data, and more. Understanding what kind of
memory address you’re dealing with can help with a variety of debugging
tasks.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="drgn_tools.mm.AddrKind.BSS">
<span class="sig-name descname"><span class="pre">BSS</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'bss'</span></em><a class="headerlink" href="#drgn_tools.mm.AddrKind.BSS" title="Link to this definition">¶</a></dt>
<dd><p>An address from the vmlinux / core kernel’s BSS data segment.</p>
<p>These are static data structures which aren’t initialized to a non-zero
value. As such, they are placed into a separate section and their memory is
zero’d at initialization.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="drgn_tools.mm.AddrKind.DATA">
<span class="sig-name descname"><span class="pre">DATA</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'data'</span></em><a class="headerlink" href="#drgn_tools.mm.AddrKind.DATA" title="Link to this definition">¶</a></dt>
<dd><p>An address from the vmlinux / core kernel’s RW data segment.</p>
<p>These are static data structures which are initialized to some non-zero
value, and not declared const.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="drgn_tools.mm.AddrKind.DIRECT_MAP">
<span class="sig-name descname"><span class="pre">DIRECT_MAP</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'direct</span> <span class="pre">map'</span></em><a class="headerlink" href="#drgn_tools.mm.AddrKind.DIRECT_MAP" title="Link to this definition">¶</a></dt>
<dd><p>An address from the direct mapping of virtual addresses to physical.</p>
<p>A lot of kernel addresses (such as memory allocated via the slab allocator)
fall under this category.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="drgn_tools.mm.AddrKind.INITTEXT">
<span class="sig-name descname"><span class="pre">INITTEXT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'inittext'</span></em><a class="headerlink" href="#drgn_tools.mm.AddrKind.INITTEXT" title="Link to this definition">¶</a></dt>
<dd><p>An address from the vmlinux / core kernel’s __init text segment.</p>
<p>These are functions decorated with the “__init” macro. Their memory is
freed after initializing the kernel. However, their symbols remain, and the
virtual addresses used to refer to them don’t get reused. Thus, you could
see these addresses in a booted system, though it would be quite unlikely.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="drgn_tools.mm.AddrKind.MODULE">
<span class="sig-name descname"><span class="pre">MODULE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'module'</span></em><a class="headerlink" href="#drgn_tools.mm.AddrKind.MODULE" title="Link to this definition">¶</a></dt>
<dd><p>An address from the kernel module range.</p>
<p>Modules have a reserved range of memory into which their code and data
pages are mapped.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="drgn_tools.mm.AddrKind.PERCPU">
<span class="sig-name descname"><span class="pre">PERCPU</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'percpu'</span></em><a class="headerlink" href="#drgn_tools.mm.AddrKind.PERCPU" title="Link to this definition">¶</a></dt>
<dd><p>An address from the vmlinux / core kernel which refers to percpu data.</p>
<p>Please note that as of now, we can only detect static percpu variables from
the core kernel. Modules and dynamically allocated percpu variables are
harder to detect, and are in the works.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="drgn_tools.mm.AddrKind.RODATA">
<span class="sig-name descname"><span class="pre">RODATA</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'rodata'</span></em><a class="headerlink" href="#drgn_tools.mm.AddrKind.RODATA" title="Link to this definition">¶</a></dt>
<dd><p>An address from the vmlinux / core kernel’s RO data segment.</p>
<p>These are static data structures which are declared const.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="drgn_tools.mm.AddrKind.TEXT">
<span class="sig-name descname"><span class="pre">TEXT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'text'</span></em><a class="headerlink" href="#drgn_tools.mm.AddrKind.TEXT" title="Link to this definition">¶</a></dt>
<dd><p>An address from the vmlinux / core kernel’s text segment.</p>
<p>Most code falls under this category. However, some __init code is discarded
after boot, and is part of INITTEXT.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="drgn_tools.mm.AddrKind.UNKNOWN">
<span class="sig-name descname"><span class="pre">UNKNOWN</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'unknown'</span></em><a class="headerlink" href="#drgn_tools.mm.AddrKind.UNKNOWN" title="Link to this definition">¶</a></dt>
<dd><p>An address which we could not categorize.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="drgn_tools.mm.AddrKind.USER">
<span class="sig-name descname"><span class="pre">USER</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'user'</span></em><a class="headerlink" href="#drgn_tools.mm.AddrKind.USER" title="Link to this definition">¶</a></dt>
<dd><p>Userspace memory.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="drgn_tools.mm.AddrKind.VMALLOC">
<span class="sig-name descname"><span class="pre">VMALLOC</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'vmalloc'</span></em><a class="headerlink" href="#drgn_tools.mm.AddrKind.VMALLOC" title="Link to this definition">¶</a></dt>
<dd><p>An address from vmalloc.</p>
<p>The vmalloc subsystem serves a variety of purposes (vmalloc allocator,
vmap, ioremap). It allows the kernel to allocate large ranges of virtually
contiguous, but physically discontiguous memory, as well as map physical
I/O memory addresses into the kernel range. It also allows the kernel to
allocate memory with “guard pages” that protect against over/under flow.</p>
<p>These addresses may be returned by vmalloc(), or setup by vmap() or
ioremap(). A common example of this category of memory is kernel stacks,
and another quite common example is memory-mapped I/O ranges.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="drgn_tools.mm.AddrKind.VMEMMAP">
<span class="sig-name descname"><span class="pre">VMEMMAP</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'vmemmap'</span></em><a class="headerlink" href="#drgn_tools.mm.AddrKind.VMEMMAP" title="Link to this definition">¶</a></dt>
<dd><p>An address from virtual memory map section.</p>
<p>The memory map is an array of “struct page” that describes all physical
memory. When CONFIG_SPARSEMEM_VMEMMAP is enabled, the memory mapping is in
a separate virtual address range, which allows “holes” in the memory
mapping to be unmapped, saving a significant portion of memory when there
are lots of holes in the physical address space.</p>
<p>What this means is that, when CONFIG_SPARSEMEM_VMEMMAP is enabled, all
<code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">page</span> <span class="pre">*</span></code> addresses are within the vmemmap region. If you see a
struct page, you know it should be in the vmemmap, and if you see a
vmemmap address, you know it must be a struct page. On UEK, VMEMMAP is
always enabled, however in general, it is configuration specific.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="drgn_tools.mm.AddrKind.categorize">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">categorize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">addr</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.mm.AddrKind.categorize" title="Link to this definition">¶</a></dt>
<dd><p>Given a memory address, tell what kind of memory it refers to.</p>
<p>Please note that right now, this is x86_64-specific and restricted to
the configurations used by UEK.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – program we’re debugging</p></li>
<li><p><strong>addr</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.IntegerLike" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntegerLike</span></code></a>) – address to categorize</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#drgn_tools.mm.AddrKind" title="drgn_tools.mm.AddrKind"><code class="xref py py-class docutils literal notranslate"><span class="pre">AddrKind</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.mm.totalram_pages">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.mm.</span></span><span class="sig-name descname"><span class="pre">totalram_pages</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.mm.totalram_pages" title="Link to this definition">¶</a></dt>
<dd><p>The value of totalram_pages is used to show MemTotal in /proc/meminfo.</p>
<p>It was defined as <code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">long</span> <span class="pre">totalram_pages</span></code>, and then changed to
<code class="docutils literal notranslate"><span class="pre">atomic_long_t</span> <span class="pre">_totalram_pages</span></code> in commit <a class="reference external" href="http://git.kernel.org/torvalds/c/ca79b0c211af">ca79b0c211af</a> (“mm: convert
totalram_pages and totalhigh_pages variables to atomic”)</p>
<p>Return this value as a drgn unsigned long.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – program to read from</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The total RAM pages as a drgn <code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">long</span></code></p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-drgn_tools.printk">
<span id="drgn-tools-printk"></span><h2>drgn_tools.printk<a class="headerlink" href="#module-drgn_tools.printk" title="Link to this heading">¶</a></h2>
<p>Additional helpers for printk utilities</p>
<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.printk.dmesg">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.printk.</span></span><span class="sig-name descname"><span class="pre">dmesg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pager</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.printk.dmesg" title="Link to this definition">¶</a></dt>
<dd><p>Display the kernel log in a pager</p>
<p>The pager is selected in the following manner. First, if the pager argument
is provided, that is used. Second, if the <code class="docutils literal notranslate"><span class="pre">PAGER</span></code> environment variable is
defined, that is used. Finally, the fallback value of <code class="docutils literal notranslate"><span class="pre">less</span></code> is used.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – Program to retrieve log for</p></li>
<li><p><strong>pager</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – Override pager selection</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-drgn_tools.virtio">
<span id="drgn-tools-virtio"></span><h2>drgn_tools.virtio<a class="headerlink" href="#module-drgn_tools.virtio" title="Link to this heading">¶</a></h2>
<p>Helpers for dumping virtio device information</p>
<dl class="py class">
<dt class="sig sig-object py" id="drgn_tools.virtio.VirtioQueueInfo">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">drgn_tools.virtio.</span></span><span class="sig-name descname"><span class="pre">VirtioQueueInfo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vq_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vq_address</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vring_addr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vring_avail_addr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vring_used_addr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nr_ent</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">last_used_idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">avail_idx_shadow</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">avail_idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">used_idx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.virtio.VirtioQueueInfo" title="Link to this definition">¶</a></dt>
<dd><p>Represents information about a virtqueue (or vring)</p>
<p>Since there are multiple formats that a vring_virtqueue could take depending on
kernel version, this namedtuple represents common elements. See
<a class="reference internal" href="#drgn_tools.virtio.get_vring_info" title="drgn_tools.virtio.get_vring_info"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_vring_info()</span></code></a> for more information.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="drgn_tools.virtio.VirtioQueueInfo.avail_idx">
<span class="sig-name descname"><span class="pre">avail_idx</span></span><a class="headerlink" href="#drgn_tools.virtio.VirtioQueueInfo.avail_idx" title="Link to this definition">¶</a></dt>
<dd><p>Alias for field number 8</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="drgn_tools.virtio.VirtioQueueInfo.avail_idx_shadow">
<span class="sig-name descname"><span class="pre">avail_idx_shadow</span></span><a class="headerlink" href="#drgn_tools.virtio.VirtioQueueInfo.avail_idx_shadow" title="Link to this definition">¶</a></dt>
<dd><p>Alias for field number 7</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="drgn_tools.virtio.VirtioQueueInfo.event">
<span class="sig-name descname"><span class="pre">event</span></span><a class="headerlink" href="#drgn_tools.virtio.VirtioQueueInfo.event" title="Link to this definition">¶</a></dt>
<dd><p>Alias for field number 10</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="drgn_tools.virtio.VirtioQueueInfo.last_used_idx">
<span class="sig-name descname"><span class="pre">last_used_idx</span></span><a class="headerlink" href="#drgn_tools.virtio.VirtioQueueInfo.last_used_idx" title="Link to this definition">¶</a></dt>
<dd><p>Alias for field number 6</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="drgn_tools.virtio.VirtioQueueInfo.nr_ent">
<span class="sig-name descname"><span class="pre">nr_ent</span></span><a class="headerlink" href="#drgn_tools.virtio.VirtioQueueInfo.nr_ent" title="Link to this definition">¶</a></dt>
<dd><p>Alias for field number 5</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="drgn_tools.virtio.VirtioQueueInfo.used_idx">
<span class="sig-name descname"><span class="pre">used_idx</span></span><a class="headerlink" href="#drgn_tools.virtio.VirtioQueueInfo.used_idx" title="Link to this definition">¶</a></dt>
<dd><p>Alias for field number 9</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="drgn_tools.virtio.VirtioQueueInfo.vq_address">
<span class="sig-name descname"><span class="pre">vq_address</span></span><a class="headerlink" href="#drgn_tools.virtio.VirtioQueueInfo.vq_address" title="Link to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="drgn_tools.virtio.VirtioQueueInfo.vq_name">
<span class="sig-name descname"><span class="pre">vq_name</span></span><a class="headerlink" href="#drgn_tools.virtio.VirtioQueueInfo.vq_name" title="Link to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="drgn_tools.virtio.VirtioQueueInfo.vring_addr">
<span class="sig-name descname"><span class="pre">vring_addr</span></span><a class="headerlink" href="#drgn_tools.virtio.VirtioQueueInfo.vring_addr" title="Link to this definition">¶</a></dt>
<dd><p>Alias for field number 2</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="drgn_tools.virtio.VirtioQueueInfo.vring_avail_addr">
<span class="sig-name descname"><span class="pre">vring_avail_addr</span></span><a class="headerlink" href="#drgn_tools.virtio.VirtioQueueInfo.vring_avail_addr" title="Link to this definition">¶</a></dt>
<dd><p>Alias for field number 3</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="drgn_tools.virtio.VirtioQueueInfo.vring_used_addr">
<span class="sig-name descname"><span class="pre">vring_used_addr</span></span><a class="headerlink" href="#drgn_tools.virtio.VirtioQueueInfo.vring_used_addr" title="Link to this definition">¶</a></dt>
<dd><p>Alias for field number 4</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.virtio.for_each_device_virtio">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.virtio.</span></span><span class="sig-name descname"><span class="pre">for_each_device_virtio</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">virtio_mods</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vd_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.virtio.for_each_device_virtio" title="Link to this definition">¶</a></dt>
<dd><p>Generate <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*</span></code> list for all virtio device</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – Program we’re debugging</p></li>
<li><p><strong>virtio_mods</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – virtio kernel module list that has loaded debuginfo</p></li>
<li><p><strong>vd_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – optional device name to filter</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>all virtio devices</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.virtio.for_each_virtio">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.virtio.</span></span><span class="sig-name descname"><span class="pre">for_each_virtio</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">virtio_mods</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vd_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.virtio.for_each_virtio" title="Link to this definition">¶</a></dt>
<dd><p>Generate <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">virtio_device</span> <span class="pre">*</span></code> object list from core</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – Program we’re debugging</p></li>
<li><p><strong>virtio_mods</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – loaded virtio modules list</p></li>
<li><p><strong>vd_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – optional device name to filter</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>list of virtio devices, <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">virtio_device</span> <span class="pre">*</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.virtio.for_each_vring_by_vdev">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.virtio.</span></span><span class="sig-name descname"><span class="pre">for_each_vring_by_vdev</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vdev</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.virtio.for_each_vring_by_vdev" title="Link to this definition">¶</a></dt>
<dd><p>Return all <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">vring_virtqueue</span> <span class="pre">*</span></code> of a <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">virtio_device</span> <span class="pre">*</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>vdev</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – Object of <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">virtio_device</span> <span class="pre">*</span></code></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>List of Objects of <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">vring_virtqueue</span> <span class="pre">*</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.virtio.get_virtio_dev_vrings">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.virtio.</span></span><span class="sig-name descname"><span class="pre">get_virtio_dev_vrings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vdevs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vd_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.virtio.get_virtio_dev_vrings" title="Link to this definition">¶</a></dt>
<dd><p>Get the vrings for the given virtio devices.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vdevs</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>]) – list of <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">virtio_device</span> <span class="pre">*</span></code></p></li>
<li><p><strong>vd_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – virtio device name, if given, will only return the device’s
vrings</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>]]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict mapping device name to list of <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">vring_virtqueue</span> <span class="pre">*</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.virtio.get_vring_info">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.virtio.</span></span><span class="sig-name descname"><span class="pre">get_vring_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vring</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.virtio.get_vring_info" title="Link to this definition">¶</a></dt>
<dd><p>Given a <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">vring_virtqueue</span> <span class="pre">*</span></code>, get important info out of it.</p>
<p>The vring_virtqueue differs across kernel versions, so the VirtioQueueInfo
structure is used to represent the important information related to the
virtqueue.  Depending on the present fields of the struct, this function
chooses the correct implementation and fills this structure out.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>vring</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – Object of type <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">vring_virtqueue</span> <span class="pre">*</span></code></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#drgn_tools.virtio.VirtioQueueInfo" title="drgn_tools.virtio.VirtioQueueInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">VirtioQueueInfo</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Common vring/virtqueue info</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.virtio.load_virtio_mods">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.virtio.</span></span><span class="sig-name descname"><span class="pre">load_virtio_mods</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.virtio.load_virtio_mods" title="Link to this definition">¶</a></dt>
<dd><p>Lookup the list of virtio-related kernel modules and ensure debuginfo is
loaded for each one.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – Program we’re debugging</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>list of virtio-related modules</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Exception" title="(in Python v3.12)"><strong>Exception</strong></a> – if the debuginfo isn’t already loaded and we couldn’t
find the file for it</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.virtio.virtio_devices_show">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.virtio.</span></span><span class="sig-name descname"><span class="pre">virtio_devices_show</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dev_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vd_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.virtio.virtio_devices_show" title="Link to this definition">¶</a></dt>
<dd><p>Print virtio devices information to stdout</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>show_list</strong> – list of virtio device</p></li>
<li><p><strong>vd_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – print given device only? Default: None, print all</p></li>
<li><p><strong>header</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – Print header? Default: True, print the header</p></li>
<li><p><strong>dev_list</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><em>List</em></a><em>[</em><a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><em>Object</em></a><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.virtio.virtio_show">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.virtio.</span></span><span class="sig-name descname"><span class="pre">virtio_show</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_vq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vd_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.virtio.virtio_show" title="Link to this definition">¶</a></dt>
<dd><p>Show virtio devices info.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – Program we’re debugging</p></li>
<li><p><strong>show_vq</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – Should we show vrings / virtqueues too</p></li>
<li><p><strong>vd_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – Only want to list virtio device’s name</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.virtio.vrings_show">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.virtio.</span></span><span class="sig-name descname"><span class="pre">vrings_show</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vrings</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.virtio.vrings_show" title="Link to this definition">¶</a></dt>
<dd><p>Print all vrings</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vrings</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>]]) – dictionary mapping virtio device name to list of <code class="docutils literal notranslate"><span class="pre">struct</span>
<span class="pre">virtio_device</span> <span class="pre">*</span></code>. This should come from <a class="reference internal" href="#drgn_tools.virtio.get_virtio_dev_vrings" title="drgn_tools.virtio.get_virtio_dev_vrings"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_virtio_dev_vrings()</span></code></a></p></li>
<li><p><strong>header</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – Flag to indicate if print header or no, default: Yes</p></li>
<li><p><strong>key</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – If given will only show given virtio device ring</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-drgn_tools.debuginfo">
<span id="drgn-tools-debuginfo"></span><h2>drgn_tools.debuginfo<a class="headerlink" href="#module-drgn_tools.debuginfo" title="Link to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">drgn_tools.debuginfo</span></code> module provides the APIs for finding debuginfo.</p>
<p>Please note: this file is quite special. Currently, it is not just the
<code class="docutils literal notranslate"><span class="pre">drgn_tools.debuginfo</span></code> module: it is also a file which is copied and pasted
into the /share/linuxtools/bin directory in order to allow people &amp; bash scripts
to easily find and extract debuginfo, while ensuring that they also make the
appropriate updates to the access.db file.</p>
<p>In the future, the CRASH scripts will be updated to call drgn-tools directly to
do this. But in the meantime, this quick solution is easier for testing, and
allows me to avoid having to deal with OL8 drgn-tools deployment yet. The
consequence here is that we can only use the standard library: no imports from
drgn or drgn-tools or third-party modules.</p>
<dl class="py class">
<dt class="sig sig-object py" id="drgn_tools.debuginfo.KernelVersion">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">drgn_tools.debuginfo.</span></span><span class="sig-name descname"><span class="pre">KernelVersion</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">version</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">release</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ol_version</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ol_update</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arch</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">original</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extraversion1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extraversion2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_uek</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.debuginfo.KernelVersion" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>version</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – </p></li>
<li><p><strong>release</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – </p></li>
<li><p><strong>ol_version</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a>) – </p></li>
<li><p><strong>ol_update</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a><em> | </em><em>None</em>) – </p></li>
<li><p><strong>arch</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – </p></li>
<li><p><strong>original</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – </p></li>
<li><p><strong>extraversion1</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – </p></li>
<li><p><strong>extraversion2</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – </p></li>
<li><p><strong>is_uek</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><em>bool</em></a>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="drgn_tools.debuginfo.KernelVersion.arch">
<span class="sig-name descname"><span class="pre">arch</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></em><a class="headerlink" href="#drgn_tools.debuginfo.KernelVersion.arch" title="Link to this definition">¶</a></dt>
<dd><p>The package architecture.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="drgn_tools.debuginfo.KernelVersion.extraversion1">
<span class="sig-name descname"><span class="pre">extraversion1</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></em><a class="headerlink" href="#drgn_tools.debuginfo.KernelVersion.extraversion1" title="Link to this definition">¶</a></dt>
<dd><p>The extra version text prior to the OL version.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="drgn_tools.debuginfo.KernelVersion.extraversion2">
<span class="sig-name descname"><span class="pre">extraversion2</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></em><a class="headerlink" href="#drgn_tools.debuginfo.KernelVersion.extraversion2" title="Link to this definition">¶</a></dt>
<dd><p>The extra version text prior to the OL version.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="drgn_tools.debuginfo.KernelVersion.is_uek">
<span class="sig-name descname"><span class="pre">is_uek</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></em><a class="headerlink" href="#drgn_tools.debuginfo.KernelVersion.is_uek" title="Link to this definition">¶</a></dt>
<dd><p>Whether the kernel is a UEK kernel.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="drgn_tools.debuginfo.KernelVersion.ol_update">
<span class="sig-name descname"><span class="pre">ol_update</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a><span class="pre">[</span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a><span class="pre">]</span></em><a class="headerlink" href="#drgn_tools.debuginfo.KernelVersion.ol_update" title="Link to this definition">¶</a></dt>
<dd><p>The Oracle Linux distribution update.</p>
<p>Note that this is not provided by UEK kernel versions. It is, however,
provided by the regular kernel package.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="drgn_tools.debuginfo.KernelVersion.ol_version">
<span class="sig-name descname"><span class="pre">ol_version</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></em><a class="headerlink" href="#drgn_tools.debuginfo.KernelVersion.ol_version" title="Link to this definition">¶</a></dt>
<dd><p>The Oracle Linux distribution version</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="drgn_tools.debuginfo.KernelVersion.original">
<span class="sig-name descname"><span class="pre">original</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></em><a class="headerlink" href="#drgn_tools.debuginfo.KernelVersion.original" title="Link to this definition">¶</a></dt>
<dd><p>The original version string</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="drgn_tools.debuginfo.KernelVersion.parse">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">parse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">original</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.debuginfo.KernelVersion.parse" title="Link to this definition">¶</a></dt>
<dd><p>Parse the given kernel release string and return a <code class="docutils literal notranslate"><span class="pre">KernelVersion</span></code>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">KernelVersion</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">prog</span><span class="p">[</span><span class="s2">&quot;UTS_RELEASE&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">string_</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;ascii&quot;</span><span class="p">))</span>
<span class="go">KernelVersion(version=&#39;4.14.35&#39;, release=&#39;2047.516.2.4&#39;, ol_version=7, ol_update=None, arch=&#39;x86_64&#39;, original=&#39;4.14.35-2047.516.2.4.el7uek.x86_64&#39;, is_uek=True)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>original</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – The kernel’s release string</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#drgn_tools.debuginfo.KernelVersion" title="drgn_tools.debuginfo.KernelVersion"><code class="xref py py-class docutils literal notranslate"><span class="pre">KernelVersion</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A <code class="docutils literal notranslate"><span class="pre">KernelVersion</span></code> with fields parsed</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="drgn_tools.debuginfo.KernelVersion.release">
<span class="sig-name descname"><span class="pre">release</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></em><a class="headerlink" href="#drgn_tools.debuginfo.KernelVersion.release" title="Link to this definition">¶</a></dt>
<dd><p>The packaging release version (the stuff after the hyphen).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="drgn_tools.debuginfo.KernelVersion.version">
<span class="sig-name descname"><span class="pre">version</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></em><a class="headerlink" href="#drgn_tools.debuginfo.KernelVersion.version" title="Link to this definition">¶</a></dt>
<dd><p>The upstream kernel version (e.g. 5.15.0).</p>
<p>Note that depending on the package versioning scheme, the patchlevel number
here may be useless, misleading, or otherwise unhelpful.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.debuginfo.fetch_debuginfo">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.debuginfo.</span></span><span class="sig-name descname"><span class="pre">fetch_debuginfo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">uname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">modules</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.debuginfo.fetch_debuginfo" title="Link to this definition">¶</a></dt>
<dd><p>Fetch debuginfo in a potentially expensive way</p>
<p>Assuming that <a class="reference internal" href="#drgn_tools.debuginfo.find_debuginfo" title="drgn_tools.debuginfo.find_debuginfo"><code class="xref py py-func docutils literal notranslate"><span class="pre">find_debuginfo()</span></code></a> has failed, we can assume that
debuginfo is not easily available locally. However, we may be able to
“fetch” it and extract it from a remote source. This is usually costly: it
will take some time to download and process the debuginfo. This function
may use different strategies depending on the user’s configuration.</p>
<p>The result may be incomplete: out-of-tree modules likely can’t be found,
and it’s of course possible that nothing can be found.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>uname</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – Kernel release to search debuginfo for</p></li>
<li><p><strong>modules</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – List of standardized module names</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Mapping of names to paths</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.debuginfo.find_debuginfo">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.debuginfo.</span></span><span class="sig-name descname"><span class="pre">find_debuginfo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog_or_release</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mod</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dinfo_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.debuginfo.find_debuginfo" title="Link to this definition">¶</a></dt>
<dd><p>Search for debuginfo (either module or regular debuginfo)</p>
<p>This function searches for a given module’s debuginfo in a list of paths.
It returns the path of a match, if found. The debuginfo paths are determined
as follows:</p>
<ol class="arabic simple">
<li><p>Files within <code class="docutils literal notranslate"><span class="pre">$PWD/$RELEASE</span></code> are considered, if it exists. Otherwise,
files within <code class="docutils literal notranslate"><span class="pre">$PWD</span></code> are considered.</p></li>
<li><p>Files in the directory <code class="docutils literal notranslate"><span class="pre">$DEBUGINFO_BASE/$RELEASE</span></code> are considered, for
each colon-separated path in <code class="docutils literal notranslate"><span class="pre">$DEBUGINFO_BASE</span></code>, if it exists.</p></li>
<li><p>Files in <code class="docutils literal notranslate"><span class="pre">/usr/lib/debug/lib/modules/$RELEASE</span></code> and
<code class="docutils literal notranslate"><span class="pre">./usr/lib/debug/lib/modules/$RELASE</span></code>, if either exist.</p></li>
<li><p>Files in <code class="docutils literal notranslate"><span class="pre">/share/linuxrpm/vmlinux_repo/{64,32}/$RELEASE</span></code> are searched.</p></li>
</ol>
<p>The directories may be searched in one of two ways. For directories whose
full paths contain the string <code class="docutils literal notranslate"><span class="pre">lib/modules</span></code>, we assume that the directory
was created by installing the RPM, or by extracting the RPM directly. This
means that the module debuginfo may be in a subdirectory, and so we use a
recursive search through subdirectories. For directories which do not
contain the string <code class="docutils literal notranslate"><span class="pre">lib/modules</span></code>, our search is not recursive. This is
mainly to improve performance: listing directories is slow on network
filesystems, and there’s a chance that directories like <code class="docutils literal notranslate"><span class="pre">$PWD</span></code> will
contain a lot of subdirectories.</p>
<p>Finally, it is important to note that this function is lenient on module
names. It should be called with the original module name, but it will match
a module file whose name has had hyphens replaced by underscore. This
ensures it can match files extracted by <a class="reference internal" href="#drgn_tools.debuginfo.fetch_debuginfo" title="drgn_tools.debuginfo.fetch_debuginfo"><code class="xref py py-func docutils literal notranslate"><span class="pre">fetch_debuginfo()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mod</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – The original module name (not standardized with underscores)</p></li>
<li><p><strong>dinfo_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – An optional additional path to search</p></li>
<li><p><strong>prog_or_release</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><em>Program</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The path to a debuginfo file, if found</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-drgn_tools.taint">
<span id="drgn-tools-taint"></span><h2>drgn_tools.taint<a class="headerlink" href="#module-drgn_tools.taint" title="Link to this heading">¶</a></h2>
<p>Contains definitions for kernel taint values</p>
<dl class="py class">
<dt class="sig sig-object py" id="drgn_tools.taint.Taint">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">drgn_tools.taint.</span></span><span class="sig-name descname"><span class="pre">Taint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.taint.Taint" title="Link to this definition">¶</a></dt>
<dd><p>Kernel and module taint flags</p>
<p>These flags are not recorded in any enum type, only preprocessor
definitions, since they need to be used in assembly listings in the kernel.
Record them here. They can be found at <code class="docutils literal notranslate"><span class="pre">include/linux/panic.h</span></code> or for
older kernels, <code class="docutils literal notranslate"><span class="pre">include/linux/kernel.h</span></code>.</p>
</dd></dl>

</section>
<section id="module-drgn_tools.corelens">
<span id="drgn-tools-corelens"></span><h2>drgn_tools.corelens<a class="headerlink" href="#module-drgn_tools.corelens" title="Link to this heading">¶</a></h2>
<p>Run analysis helper code and output to stdout or a directory</p>
<dl class="py class">
<dt class="sig sig-object py" id="drgn_tools.corelens.CorelensModule">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">drgn_tools.corelens.</span></span><span class="sig-name descname"><span class="pre">CorelensModule</span></span><a class="headerlink" href="#drgn_tools.corelens.CorelensModule" title="Link to this definition">¶</a></dt>
<dd><p>The base class for all corelens modules.</p>
<p>In order to make a helper executable by corelens, you need to create your
own sub-class of this one. At a minimum, you must define the field
<a class="reference internal" href="#drgn_tools.corelens.CorelensModule.name" title="drgn_tools.corelens.CorelensModule.name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">name</span></code></a> and provide a <a class="reference internal" href="#drgn_tools.corelens.run" title="drgn_tools.corelens.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run()</span></code></a> method. Here is a minimal example
of a hello world module:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">HelloWorld</span><span class="p">(</span><span class="n">CorelensModule</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;hello&quot;</span>
    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prog</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello, world!&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>However, further fields can be set in order to document debuginfo and kernel
module expectations, and to handle command line arguments.</p>
<dl class="py method">
<dt class="sig sig-object py" id="drgn_tools.corelens.CorelensModule.add_args">
<span class="sig-name descname"><span class="pre">add_args</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parser</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.corelens.CorelensModule.add_args" title="Link to this definition">¶</a></dt>
<dd><p>Set command line arguments for the module</p>
<p>Use the <a class="reference external" href="https://docs.python.org/3/library/argparse.html#module-argparse" title="(in Python v3.12)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">argparse</span></code></a> library to add any arguments your program
accepts. The arguments may be provided on the command line, or come from
the <a class="reference internal" href="#drgn_tools.corelens.CorelensModule.default_args" title="drgn_tools.corelens.CorelensModule.default_args"><code class="xref py py-attr docutils literal notranslate"><span class="pre">default_args</span></code></a> field.</p>
<dl class="field-list simple">
<dt class="field-odd">Params parser<span class="colon">:</span></dt>
<dd class="field-odd"><p>argument parser to configure</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>parser</strong> (<a class="reference external" href="https://docs.python.org/3/library/argparse.html#argparse.ArgumentParser" title="(in Python v3.12)"><em>ArgumentParser</em></a>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="drgn_tools.corelens.CorelensModule.debuginfo_kmods">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">debuginfo_kmods</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#drgn_tools.corelens.CorelensModule.debuginfo_kmods" title="Link to this definition">¶</a></dt>
<dd><p>A list of kmod names (or fnmatch patterns) we need debuginfo for</p>
<p>This field, when specified, is a list of strings. Each string could be a
kmod name, or a <a class="reference external" href="https://docs.python.org/3/library/fnmatch.html#module-fnmatch" title="(in Python v3.12)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">fnmatch</span></code></a> pattern which matches several kmods.</p>
<p>Unlike <a class="reference internal" href="#drgn_tools.corelens.CorelensModule.skip_unless_have_kmod" title="drgn_tools.corelens.CorelensModule.skip_unless_have_kmod"><code class="xref py py-attr docutils literal notranslate"><span class="pre">skip_unless_have_kmod</span></code></a>, we don’t require that the kmods
here are loaded. Instead, we just require that <em>if</em> the modules are
loaded, they must have debuginfo present.</p>
<p>This can be useful for a subsystem that has several modules which may
use it, e.g. the virtio subsystem. Each virtio device has its own kmod
implementing it (such as <code class="docutils literal notranslate"><span class="pre">virtio_blk</span></code>). There should be no specific
requirement that a particular virtio device has its module loaded, but
just that all the virtio modules have debuginfo ready.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="drgn_tools.corelens.CorelensModule.default_args">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">default_args</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#drgn_tools.corelens.CorelensModule.default_args" title="Link to this definition">¶</a></dt>
<dd><p>When specified, this sets the default command line arguments</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="drgn_tools.corelens.CorelensModule.name">
<em class="property"><span class="pre">abstract</span><span class="w"> </span><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></em><a class="headerlink" href="#drgn_tools.corelens.CorelensModule.name" title="Link to this definition">¶</a></dt>
<dd><p><strong>Required:</strong> set a field with the name of this module</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="drgn_tools.corelens.CorelensModule.need_dwarf">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">need_dwarf</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></em><a class="headerlink" href="#drgn_tools.corelens.CorelensModule.need_dwarf" title="Link to this definition">¶</a></dt>
<dd><p>When True, this corelens module requires DWARF debuginfo</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="drgn_tools.corelens.CorelensModule.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.corelens.CorelensModule.run" title="Link to this definition">¶</a></dt>
<dd><p><strong>Required:</strong> a function which executes the module</p>
<p>This function will be called to execute the module. Use the normal
print() function, which writes to <code class="docutils literal notranslate"><span class="pre">sys.stdout</span></code>, to print information.
When output is directed to a file, <code class="docutils literal notranslate"><span class="pre">sys.stdout</span></code> will be updated, so
output redirection is transparent to the function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – Kernel being debugged</p></li>
<li><p><strong>args</strong> (<a class="reference external" href="https://docs.python.org/3/library/argparse.html#argparse.Namespace" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Namespace</span></code></a>) – Parsed command line arguments (see <a class="reference internal" href="#drgn_tools.corelens.CorelensModule.add_args" title="drgn_tools.corelens.CorelensModule.add_args"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_args()</span></code></a>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="drgn_tools.corelens.CorelensModule.skip_unless_have_kmod">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">skip_unless_have_kmod</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><span class="pre">None</span></a></em><a class="headerlink" href="#drgn_tools.corelens.CorelensModule.skip_unless_have_kmod" title="Link to this definition">¶</a></dt>
<dd><p>If specified, skip this when the kmod is not present in the kernel</p>
<p>This field, when specified, is a string naming a kernel module (referred
to as kmod in these docs to avoid confusing with “corelens module”).
This kmod is expected to signify the presence of the subsystem that this
module is dealing with. If the kmod is not loaded in the kernel, then
this module is skipped by corelens. If the kmod is loaded, but no
debuginfo is present, the module is skipped and an error is raised.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.corelens.make_runner">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.corelens.</span></span><span class="sig-name descname"><span class="pre">make_runner</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.corelens.make_runner" title="Link to this definition">¶</a></dt>
<dd><p>Return a helper, “cl”, which executes corelens commands against a program</p>
<p>The <a class="reference internal" href="#drgn_tools.corelens.run" title="drgn_tools.corelens.run"><code class="xref py py-func docutils literal notranslate"><span class="pre">run()</span></code></a> function requires passing the <code class="docutils literal notranslate"><span class="pre">prog</span></code> as its first
argument, which is a bit clunky when trying to run a command. So, this
function can return a helper that is bound to the specific program, so that
you can simply run <code class="docutils literal notranslate"><span class="pre">cl(&quot;command&quot;)</span></code> without including the <code class="docutils literal notranslate"><span class="pre">prog</span></code>
argument. This is intended for interactive environments.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Callable</span></code></a>[[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>], <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>]</p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><em>Program</em></a>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.corelens.run">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.corelens.</span></span><span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cl_cmd</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.corelens.run" title="Link to this definition">¶</a></dt>
<dd><p>Run a single corelens command</p>
<p>The string <code class="docutils literal notranslate"><span class="pre">cl_cmd</span></code> is split using common shell lexing rules, and the
first token is used as the name of the corelens module. The remaining tokens
are used as arguments to that corelens module. The module is executed
against <code class="docutils literal notranslate"><span class="pre">prog</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cl_cmd</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – command string to execute</p></li>
<li><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><em>Program</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-drgn_tools.block">
<span id="drgn-tools-block"></span><h2>drgn_tools.block<a class="headerlink" href="#module-drgn_tools.block" title="Link to this heading">¶</a></h2>
<p>Helpers for block layers.</p>
<p>No kernel modules are required since uek built in all io schduler modules.</p>
<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.block.blkdev_ro">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.block.</span></span><span class="sig-name descname"><span class="pre">blkdev_ro</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bdev</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.block.blkdev_ro" title="Link to this definition">¶</a></dt>
<dd><p>Check whether <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">block_device</span> <span class="pre">*</span></code> is read only</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>bdev</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">block_device</span> <span class="pre">*</span></code></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True if readonly</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.block.dump_inflight_io">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.block.</span></span><span class="sig-name descname"><span class="pre">dump_inflight_io</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">diskname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'all'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.block.dump_inflight_io" title="Link to this definition">¶</a></dt>
<dd><p>Dump all inflight io from all disks</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – drgn program</p></li>
<li><p><strong>diskname</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – name of some disk or “all” for all disks.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.block.for_each_hw_queue">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.block.</span></span><span class="sig-name descname"><span class="pre">for_each_hw_queue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">q</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.block.for_each_hw_queue" title="Link to this definition">¶</a></dt>
<dd><p>List all hw queues of some request_queue</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>q</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">request_queue</span> <span class="pre">*</span></code></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>[<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>all <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">blk_mq_hw_ctx</span> <span class="pre">*</span></code> of the queue as Iterator,
or None if not mq</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.block.for_each_hwq_pending_rq">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.block.</span></span><span class="sig-name descname"><span class="pre">for_each_hwq_pending_rq</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hwq</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.block.for_each_hwq_pending_rq" title="Link to this definition">¶</a></dt>
<dd><p>List pending requests from <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">blk_mq_hw_ctx</span> <span class="pre">*</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>hwq</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">blk_mq_hw_ctx</span> <span class="pre">*</span></code></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>[<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>all <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">request</span> <span class="pre">*</span></code> in this hwq as Iterator</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.block.for_each_mq_pending_request">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.block.</span></span><span class="sig-name descname"><span class="pre">for_each_mq_pending_request</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">q</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.block.for_each_mq_pending_request" title="Link to this definition">¶</a></dt>
<dd><p>List pending requests from <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">request_queue</span> <span class="pre">*</span></code> that supports mq</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>q</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">request_queue</span> <span class="pre">*</span></code></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code></a>[<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>, <a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>]]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>an iterator of objects of type <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">blk_mq_hw_ctx</span> <span class="pre">*</span></code>
and <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">request</span> <span class="pre">*</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.block.for_each_request_queue">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.block.</span></span><span class="sig-name descname"><span class="pre">for_each_request_queue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.block.for_each_request_queue" title="Link to this definition">¶</a></dt>
<dd><p>List all request_queue in the system.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – drgn program</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>[<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>an iterator of all <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">request_queue</span> <span class="pre">*</span></code> on the system</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.block.for_each_sbitmap_set_bit">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.block.</span></span><span class="sig-name descname"><span class="pre">for_each_sbitmap_set_bit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sb</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.block.for_each_sbitmap_set_bit" title="Link to this definition">¶</a></dt>
<dd><p>List set bit in struct sbitmap</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>sb</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">sbitmap</span> <span class="pre">*</span></code></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>each set bit as Iterator</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.block.for_each_sq_elevator_rq">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.block.</span></span><span class="sig-name descname"><span class="pre">for_each_sq_elevator_rq</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">q</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.block.for_each_sq_elevator_rq" title="Link to this definition">¶</a></dt>
<dd><p>List request in elevator of legacy request_queue</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>q</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">request_queue</span> <span class="pre">*</span></code>
:returns: pending <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">request</span> <span class="pre">*</span></code> from elevator of sq as Iterator</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>[<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.block.for_each_sq_pending_request">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.block.</span></span><span class="sig-name descname"><span class="pre">for_each_sq_pending_request</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">q</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.block.for_each_sq_pending_request" title="Link to this definition">¶</a></dt>
<dd><p>List pending requests from legacy <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">request_queue</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>q</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">request_queue</span> <span class="pre">*</span></code></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>[<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>pending <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">request</span> <span class="pre">*</span></code> as Iterator</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.block.for_each_tag_bt_set_bit">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.block.</span></span><span class="sig-name descname"><span class="pre">for_each_tag_bt_set_bit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bt</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.block.for_each_tag_bt_set_bit" title="Link to this definition">¶</a></dt>
<dd><p>List all used tag from struct blk_mq_bitmap_tags</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>bt</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">blk_mq_bitmap_tags</span> <span class="pre">*</span></code></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>each used tag as Iterator</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.block.for_each_tag_pending_rq">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.block.</span></span><span class="sig-name descname"><span class="pre">for_each_tag_pending_rq</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tags</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.block.for_each_tag_pending_rq" title="Link to this definition">¶</a></dt>
<dd><p>List all pending request from struct blk_mq_tags</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>tags</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">blk_mq_tags</span> <span class="pre">*</span></code></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>[<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>each pending <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">request</span> <span class="pre">*</span></code> as Iterator</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.block.for_each_tag_pending_rq_uek4">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.block.</span></span><span class="sig-name descname"><span class="pre">for_each_tag_pending_rq_uek4</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tags</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.block.for_each_tag_pending_rq_uek4" title="Link to this definition">¶</a></dt>
<dd><p>List all pending request from struct blk_mq_tags</p>
<blockquote>
<div><p>It only works for the kernel where struct sbitmap_queue doesn’t exist.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>tags</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">blk_mq_tags</span> <span class="pre">*</span></code></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>[<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>each pending <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">request</span> <span class="pre">*</span></code> as Iterator</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.block.get_inflight_io_nr">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.block.</span></span><span class="sig-name descname"><span class="pre">get_inflight_io_nr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">disk</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.block.get_inflight_io_nr" title="Link to this definition">¶</a></dt>
<dd><p>Get inflight io number from some disk</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – drgn program</p></li>
<li><p><strong>disk</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">gendisk</span> <span class="pre">*</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>number of in-flight io</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.block.is_mq">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.block.</span></span><span class="sig-name descname"><span class="pre">is_mq</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">q</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.block.is_mq" title="Link to this definition">¶</a></dt>
<dd><p>Check whether request queue support multiple queue</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>q</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">request_queue</span> <span class="pre">*</span></code></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>true if mq, otherwise false</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.block.request_target">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.block.</span></span><span class="sig-name descname"><span class="pre">request_target</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rq</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.block.request_target" title="Link to this definition">¶</a></dt>
<dd><p>Get the target disk of io request</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>rq</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">request</span> <span class="pre">*</span></code></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">gendisk</span> <span class="pre">*</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.block.rq_flags">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.block.</span></span><span class="sig-name descname"><span class="pre">rq_flags</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rq</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.block.rq_flags" title="Link to this definition">¶</a></dt>
<dd><p>Get request operation flags</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>rq</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">request</span> <span class="pre">*</span></code></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>operation flags of the request</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.block.rq_op">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.block.</span></span><span class="sig-name descname"><span class="pre">rq_op</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rq</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.block.rq_op" title="Link to this definition">¶</a></dt>
<dd><p>Get request operation name</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>rq</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">request</span> <span class="pre">*</span></code></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>combined request operation enum name as str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.block.rq_op_ef295ecf">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.block.</span></span><span class="sig-name descname"><span class="pre">rq_op_ef295ecf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rq</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.block.rq_op_ef295ecf" title="Link to this definition">¶</a></dt>
<dd><p>Get request operation name</p>
<p>This only works for kernel which is newer than
commit ef295ecf090d (“block: better op and flags encoding”) like uek5.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>rq</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">request</span> <span class="pre">*</span></code></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>combined request operation enum name as str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.block.rq_op_old">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.block.</span></span><span class="sig-name descname"><span class="pre">rq_op_old</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rq</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.block.rq_op_old" title="Link to this definition">¶</a></dt>
<dd><p>Get request operation name for kernel which is older than commit ef295ecf(uek4)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>rq</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">request</span> <span class="pre">*</span></code></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>combined request operation enum name as str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.block.rq_pending_time_ms">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.block.</span></span><span class="sig-name descname"><span class="pre">rq_pending_time_ms</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rq</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.block.rq_pending_time_ms" title="Link to this definition">¶</a></dt>
<dd><p>Get io pending time in ms</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>rq</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">request</span> <span class="pre">*</span></code></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>request pending time</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-drgn_tools.locking">
<span id="drgn-tools-locking"></span><h2>drgn_tools.locking<a class="headerlink" href="#module-drgn_tools.locking" title="Link to this heading">¶</a></h2>
<p>Helper for linux kernel locking</p>
<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.locking.for_each_mutex_waiter">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.locking.</span></span><span class="sig-name descname"><span class="pre">for_each_mutex_waiter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mutex</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.locking.for_each_mutex_waiter" title="Link to this definition">¶</a></dt>
<dd><p>List task waiting on the mutex</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – drgn program</p></li>
<li><p><strong>mutex</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">mutex</span> <span class="pre">*</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>[<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">task_struct</span> <span class="pre">*</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.locking.for_each_rwsem_waiter">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.locking.</span></span><span class="sig-name descname"><span class="pre">for_each_rwsem_waiter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rwsem</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.locking.for_each_rwsem_waiter" title="Link to this definition">¶</a></dt>
<dd><p>List task waiting on the rw semaphore</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – drgn program</p></li>
<li><p><strong>rwsem</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rw_semaphore</span> <span class="pre">*</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>[<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">task_struct</span> <span class="pre">*</span></code></p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-drgn_tools.ext4_dirlock">
<span id="drgn-tools-ext4-dirlock"></span><h2>drgn_tools.ext4_dirlock<a class="headerlink" href="#module-drgn_tools.ext4_dirlock" title="Link to this heading">¶</a></h2>
<p>Help detect hung by ext4 direcotry inode lock</p>
<p>Exadata customers run into bug 32016306 many times. The symptom of the bug
is that some process is reading one ext4 directory with inode lock held,
some other processes are trying to access the same directory and get hung
by inode lock of that directory. In most of the cases, that directory is
some db trace direcotory under /u01 in exadata system since db tracing is
enabled, once CRS detects those hung db processes, it will evict the system,
sometimes due to some unknown reason, CRS eviction doesn’t happen, instead
the system just hung or panic by hung task panic.</p>
<p>The following is an example of the culprit process that causes hung.
The other processs will be hung by rwsem write block or mutex depending on
kernel verison.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PID</span><span class="p">:</span> <span class="mi">106479</span>  <span class="n">TASK</span><span class="p">:</span> <span class="n">ffff9bcb1c8c5f00</span>  <span class="n">CPU</span><span class="p">:</span> <span class="mi">46</span>  <span class="n">COMMAND</span><span class="p">:</span> <span class="s2">&quot;ohasd.bin&quot;</span>
 <span class="c1">#0 [ffffb54e916efa10] __schedule at ffffffffb988ff6c</span>
 <span class="c1">#1 [ffffb54e916efab0] schedule at ffffffffb9890586</span>
 <span class="c1">#2 [ffffb54e916efac8] io_schedule at ffffffffb9890a06</span>
 <span class="c1">#3 [ffffb54e916efae0] bit_wait_io at ffffffffb9890fb1</span>
 <span class="c1">#4 [ffffb54e916efaf8] __wait_on_bit at ffffffffb9890a96</span>
 <span class="c1">#5 [ffffb54e916efb38] out_of_line_wait_on_bit at ffffffffb9890b51</span>
 <span class="c1">#6 [ffffb54e916efb90] __wait_on_buffer at ffffffffb92d1432</span>
 <span class="c1">#7 [ffffb54e916efba8] ext4_bread at ffffffffc019024e [ext4]</span>
 <span class="c1">#8 [ffffb54e916efbd0] __ext4_read_dirblock at ffffffffc01a75f4 [ext4]</span>
 <span class="c1">#9 [ffffb54e916efc28] htree_dirblock_to_tree at ffffffffc01a7ecb [ext4]</span>
<span class="c1">#10 [ffffb54e916efce0] ext4_htree_fill_tree at ffffffffc01a928b [ext4]</span>
<span class="c1">#11 [ffffb54e916efdc0] ext4_readdir at ffffffffc0173bea [ext4]</span>
<span class="c1">#12 [ffffb54e916efe80] iterate_dir at ffffffffb92aa1b8</span>
<span class="c1">#13 [ffffb54e916efec8] sys_getdents at ffffffffb92aaaf8</span>
<span class="c1">#14 [ffffb54e916eff28] do_syscall_64 at ffffffffb9003ca9</span>
<span class="c1">#15 [ffffb54e916eff50] entry_SYSCALL_64_after_hwframe at ffffffffb9a001b1</span>
</pre></div>
</div>
<p>Since <code class="docutils literal notranslate"><span class="pre">ext4_readdir()</span></code> reads each dir block synchronized, so either of the
following reason can lead to this hung.
1. The size of that ext4 inode direcotry is large
2. The volume hosting the direcotry has high io latency</p>
<p>This helper will dump the following output if hung detected. From the metric
it report we can tell what’s causing the hung.
The “Lastrun2now” of the first lock waiter can tell how long this hung has
been there, any hung time close or over 30s could lead to CRS eviction.
If direcotory size is large, please clean up it, if that direcotry doesn’t
has much files in it, please recreate the directory, ext4 may not free some
direcotry blocks even all dentry in it are already removed.
If it’s db trace direcotry, please also disable db tracing to avoid that
directory get filled up again.</p>
<p>If directory size is not large, but hung time is long, then it’s probably
underlying disk volume is slow. For example in the following output, lock
owner stays in D status 259ms, run the helper again with call trace enabled,
if it is waiting io done, then that means the underlying disk volume has
long I/O latency, you should review iostat from oswatcher for more details.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ext4_dirlock</span><span class="o">.</span><span class="n">ext4_dirlock_scan</span><span class="p">(</span><span class="n">prog</span><span class="p">)</span>
<span class="go">Directory   : /u01/app/grid/diag/crs/lrlupxa5adm02vm02/crs/trace</span>
<span class="go">Volume      : dm-2</span>
<span class="go">dentry      : 0xffff9bd0bd8a3a40</span>
<span class="go">inode       : 0xffff9bd9d09611e8</span>
<span class="go">Size        : 21835776</span>
<span class="go">Blocks      : 42728</span>
<span class="go">Inode Lock  : Command          Pid      Status Lastrun2now(ms)</span>
<span class="go">Lock owner  : ohasd.bin        106479   D      259</span>
<span class="go">Lock waiter :</span>
<span class="go">        [0] : ocssd.bin        120176   D      31128</span>
<span class="go">        [1] : gipcd.bin        110130   D      22267</span>
<span class="go">        [2] : cssdagent        118193   D      14643</span>
<span class="go">        [3] : cssdmonitor      118117   D      14074</span>
<span class="go">        [4] : ohasd.bin        106260   D      603</span>
</pre></div>
</div>
<p>Please note even though I mention a lot of exadata/db/crs, it doesn’t mean
this helper only works there, it can help detect ext4 directory hung in
other systems also.</p>
<p>This helper will only work with vmcore, because it requires unwinding the stack
trace of each process for searching the hung, which is not supported by live
system. Also debuginfo is always required for this helper because it will grab
variable from the stack frame.</p>
<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.ext4_dirlock.ext4_dirlock_scan">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.ext4_dirlock.</span></span><span class="sig-name descname"><span class="pre">ext4_dirlock_scan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stacktrace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.ext4_dirlock.ext4_dirlock_scan" title="Link to this definition">¶</a></dt>
<dd><p>Scan processes hung by ext4 directory inode lock</p>
<p>The inode lock is <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">mutex</span></code> in uek4 and
<code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rw_semaphore</span></code> in uek5+</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – drgn program</p></li>
<li><p><strong>stacktrace</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – True to dump process stack trace</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.ext4_dirlock.show_lock_waiter">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.ext4_dirlock.</span></span><span class="sig-name descname"><span class="pre">show_lock_waiter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stacktrace</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.ext4_dirlock.show_lock_waiter" title="Link to this definition">¶</a></dt>
<dd><p>Show lock waiter</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – drgn program</p></li>
<li><p><strong>task</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">task_struct</span> <span class="pre">*</span></code></p></li>
<li><p><strong>index</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) – index of waiter</p></li>
<li><p><strong>stacktrace</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – true to dump stack trace of the waiter</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-drgn_tools.smp">
<span id="drgn-tools-smp"></span><h2>drgn_tools.smp<a class="headerlink" href="#module-drgn_tools.smp" title="Link to this heading">¶</a></h2>
<p>Decode CSD/CFD info</p>
<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.smp.dump_cfd_at_all_cpus">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.smp.</span></span><span class="sig-name descname"><span class="pre">dump_cfd_at_all_cpus</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.smp.dump_cfd_at_all_cpus" title="Link to this definition">¶</a></dt>
<dd><p>Dump per-cpu <code class="docutils literal notranslate"><span class="pre">cfd_data</span></code></p>
<p>There is a per-cpu <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">call_function_data</span></code> object (<code class="docutils literal notranslate"><span class="pre">cfd_data</span></code>) for
each cpu and cpus can use the underlying per-cpu csd to send csd requests.</p>
<p>This helper dumps CSDs within <code class="docutils literal notranslate"><span class="pre">cfd_data</span></code> of each cpu.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><em>Program</em></a>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.smp.dump_pending_csd_for_all_cpus">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.smp.</span></span><span class="sig-name descname"><span class="pre">dump_pending_csd_for_all_cpus</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.smp.dump_pending_csd_for_all_cpus" title="Link to this definition">¶</a></dt>
<dd><p>Dump <code class="docutils literal notranslate"><span class="pre">call_single_queue</span></code> list of all CPUs</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><em>Program</em></a>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.smp.dump_smp_ipi_objects">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.smp.</span></span><span class="sig-name descname"><span class="pre">dump_smp_ipi_objects</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.smp.dump_smp_ipi_objects" title="Link to this definition">¶</a></dt>
<dd><p>Dump objects of smp ipi subsystem
:rtype: <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
<ol class="arabic simple">
<li><p>per cpu <code class="docutils literal notranslate"><span class="pre">call_single_queue</span></code> list of each CPU</p></li>
<li><p>per cpu <code class="docutils literal notranslate"><span class="pre">cur_csd</span></code> of each CPU</p></li>
<li><p>per cpu <code class="docutils literal notranslate"><span class="pre">cur_csd_func</span></code> of each CPU</p></li>
</ol>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><em>Program</em></a>) – </p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.smp.dump_smp_ipi_state">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.smp.</span></span><span class="sig-name descname"><span class="pre">dump_smp_ipi_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.smp.dump_smp_ipi_state" title="Link to this definition">¶</a></dt>
<dd><p>Dump state of SMP IPI subsystem
:rtype: <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
<ol class="arabic simple">
<li><p>Which CPUs have pending smp ipis, what they are doing and
whether they have interrupts disabled.</p></li>
<li><p>Which CPUs are waiting in csd lock, at what place and for
how long.</p></li>
<li><p>Is there any pending csd for an offline CPU?</p></li>
</ol>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><em>Program</em></a>) – </p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.smp.for_each_call_single_queue">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.smp.</span></span><span class="sig-name descname"><span class="pre">for_each_call_single_queue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.smp.for_each_call_single_queue" title="Link to this definition">¶</a></dt>
<dd><p>Iterate over list of per-cpu <code class="docutils literal notranslate"><span class="pre">call_single_queue</span></code> objects</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterator</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>, <a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>]]</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Iteator of cpu number and <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">llist_head</span> <span class="pre">*</span></code></p>
</dd>
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><em>Program</em></a>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.smp.for_each_cfd_data">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.smp.</span></span><span class="sig-name descname"><span class="pre">for_each_cfd_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.smp.for_each_cfd_data" title="Link to this definition">¶</a></dt>
<dd><p>Iterate over per-cpu <code class="docutils literal notranslate"><span class="pre">cfd_data</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterator</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>, <a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>]]</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Iteator of cpu number and <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">call_function_data</span> <span class="pre">*</span></code></p>
</dd>
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><em>Program</em></a>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.smp.for_each_cur_csd">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.smp.</span></span><span class="sig-name descname"><span class="pre">for_each_cur_csd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.smp.for_each_cur_csd" title="Link to this definition">¶</a></dt>
<dd><p>Iterate over all CSDs pointed to by per-cpu <code class="docutils literal notranslate"><span class="pre">cur_csd</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterator</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>, <a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>]]</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Iterator of cpu number and <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">__call_single_data</span> <span class="pre">*</span></code>
or iterator of cpu number and <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">call_single_data</span> <span class="pre">*</span></code></p>
</dd>
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><em>Program</em></a>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.smp.for_each_cur_csd_func">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.smp.</span></span><span class="sig-name descname"><span class="pre">for_each_cur_csd_func</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.smp.for_each_cur_csd_func" title="Link to this definition">¶</a></dt>
<dd><p>Iterate over all functions pointed to by per-cpu <code class="docutils literal notranslate"><span class="pre">cur_csd_func</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterator</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>, <a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>]]</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Iteator of cpu number and <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">(*smp_call_func_t)(void*)</span></code></p>
</dd>
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><em>Program</em></a>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.smp.is_call_single_queue_empty">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.smp.</span></span><span class="sig-name descname"><span class="pre">is_call_single_queue_empty</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cpu</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.smp.is_call_single_queue_empty" title="Link to this definition">¶</a></dt>
<dd><p>Return whether <code class="docutils literal notranslate"><span class="pre">call_single_queue</span></code> of a CPU is empty or not.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cpu</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) – The cpu to check.</p></li>
<li><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><em>Program</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True if <code class="docutils literal notranslate"><span class="pre">call_single_queue</span></code> is empty, False otherwise</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.smp.is_cur_csd_pending">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.smp.</span></span><span class="sig-name descname"><span class="pre">is_cur_csd_pending</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cpu</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.smp.is_cur_csd_pending" title="Link to this definition">¶</a></dt>
<dd><p>Return whether cur_csd.func of a CPU is still under execution.</p>
<p>For kernels that have <code class="docutils literal notranslate"><span class="pre">cur_csd_func</span></code> and <code class="docutils literal notranslate"><span class="pre">cur_csd</span></code>, before starting
execution of csd function at destination CPU, both of these per-cpu
variables are updated and just after executing csd function cur_csd is made
NULL.</p>
<p>So for a CPU if <code class="docutils literal notranslate"><span class="pre">cur_csd_func</span></code> is same as <code class="docutils literal notranslate"><span class="pre">cur_csd.func</span></code>, that would
mean that the CPU is in the middle of executing csd function or it has just
finished the execution of csd function but has noy yet updated cur_csd to
NULL.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">cur_csd.func</span></code> and <code class="docutils literal notranslate"><span class="pre">cur_csd_func</span></code> are not same, <code class="docutils literal notranslate"><span class="pre">cur_csd_func</span></code>
gives last csd function that this CPU executed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cpu</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) – The cpu to check.</p></li>
<li><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><em>Program</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True if <code class="docutils literal notranslate"><span class="pre">cur_csd_func</span></code> equals <code class="docutils literal notranslate"><span class="pre">cur_csd.func</span></code>, False otherwise</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-drgn_tools.md">
<span id="drgn-tools-md"></span><h2>drgn_tools.md<a class="headerlink" href="#module-drgn_tools.md" title="Link to this heading">¶</a></h2>
<p>Helpers for soft raid</p>
<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.md.for_each_md">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.md.</span></span><span class="sig-name descname"><span class="pre">for_each_md</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.md.for_each_md" title="Link to this definition">¶</a></dt>
<dd><p>List all soft raid disk in the system</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – drgn program</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>[<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>an iterator of all <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">mddev</span> <span class="pre">*</span></code> in the system</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.md.for_each_md_pv">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.md.</span></span><span class="sig-name descname"><span class="pre">for_each_md_pv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mddev</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.md.for_each_md_pv" title="Link to this definition">¶</a></dt>
<dd><p>List all physical disks of the md</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – drgn program</p></li>
<li><p><strong>mddev</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – <code class="docutils literal notranslate"><span class="pre">`struct</span> <span class="pre">mddev</span> <span class="pre">*`</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>[<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>an iterator of all <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">md_rdev</span> <span class="pre">*</span></code> of the md</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.md.md_pending_writes">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.md.</span></span><span class="sig-name descname"><span class="pre">md_pending_writes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mddev</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.md.md_pending_writes" title="Link to this definition">¶</a></dt>
<dd><p>Get pending write IO request number from <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">mddev</span> <span class="pre">*</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – drgn program</p></li>
<li><p><strong>mddev</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">mddev</span> <span class="pre">*</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>pending write IO request number</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.md.md_pv_name">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.md.</span></span><span class="sig-name descname"><span class="pre">md_pv_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rdev</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.md.md_pv_name" title="Link to this definition">¶</a></dt>
<dd><p>Get the name of one physical disk for the md</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>rdev</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">md_rdev</span> <span class="pre">*</span></code></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the name of the physical disk</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.md.md_pv_pending_io">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.md.</span></span><span class="sig-name descname"><span class="pre">md_pv_pending_io</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rdev</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.md.md_pv_pending_io" title="Link to this definition">¶</a></dt>
<dd><p>Get pending IO request from <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">md_rdev</span> <span class="pre">*</span></code></p>
<p>Only raid level 1,4,5,6,10 supports this</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>rdev</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">md_rdev</span> <span class="pre">*</span></code></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>pending io number for supporting raid level, otherwise ‘-’</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.md.raid1_nr_value">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.md.</span></span><span class="sig-name descname"><span class="pre">raid1_nr_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nr</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.md.raid1_nr_value" title="Link to this definition">¶</a></dt>
<dd><p>Get nr_pending/waiting value</p>
<p>Those fields are changed by 824e47daddbfc from “int” to atomic *</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>nr</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – nr_* of <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">r1conf</span></code></p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>value as int</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.md.show_md">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.md.</span></span><span class="sig-name descname"><span class="pre">show_md</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.md.show_md" title="Link to this definition">¶</a></dt>
<dd><p>Dump md info in the system</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – drgn program</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.md.show_md_pv">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.md.</span></span><span class="sig-name descname"><span class="pre">show_md_pv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mddev</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.md.show_md_pv" title="Link to this definition">¶</a></dt>
<dd><p>Dump the physical disk specific info</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – drgn program</p></li>
<li><p><strong>mddev</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">mddev</span> <span class="pre">*</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.md.show_raid1_info">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.md.</span></span><span class="sig-name descname"><span class="pre">show_raid1_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mddev</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.md.show_raid1_info" title="Link to this definition">¶</a></dt>
<dd><p>Show raid1 only info</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – drgn program</p></li>
<li><p><strong>mddev</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">mddev</span> <span class="pre">*</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.md.show_raid5_info">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.md.</span></span><span class="sig-name descname"><span class="pre">show_raid5_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mddev</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.md.show_raid5_info" title="Link to this definition">¶</a></dt>
<dd><p>Show raid5 only info</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – drgn program</p></li>
<li><p><strong>mddev</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">mddev</span> <span class="pre">*</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-drgn_tools.rds">
<span id="drgn-tools-rds"></span><h2>drgn_tools.rds<a class="headerlink" href="#module-drgn_tools.rds" title="Link to this heading">¶</a></h2>
<p>Helpers for examining rds related info.</p>
<dl class="py class">
<dt class="sig sig-object py" id="drgn_tools.rds.RdsIbConnInfo">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">drgn_tools.rds.</span></span><span class="sig-name descname"><span class="pre">RdsIbConnInfo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i_cm_id_val</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rdma_cm_state_val</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ib_cm_id_val</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ib_cm_state_val</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.rds.RdsIbConnInfo" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>i_cm_id_val</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a>) – </p></li>
<li><p><strong>rdma_cm_state_val</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – </p></li>
<li><p><strong>ib_cm_id_val</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a>) – </p></li>
<li><p><strong>ib_cm_state_val</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="drgn_tools.rds.RdsIbConnInfo.i_cm_id_val">
<span class="sig-name descname"><span class="pre">i_cm_id_val</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></em><a class="headerlink" href="#drgn_tools.rds.RdsIbConnInfo.i_cm_id_val" title="Link to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="drgn_tools.rds.RdsIbConnInfo.ib_cm_id_val">
<span class="sig-name descname"><span class="pre">ib_cm_id_val</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></em><a class="headerlink" href="#drgn_tools.rds.RdsIbConnInfo.ib_cm_id_val" title="Link to this definition">¶</a></dt>
<dd><p>Alias for field number 2</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="drgn_tools.rds.RdsIbConnInfo.ib_cm_state_val">
<span class="sig-name descname"><span class="pre">ib_cm_state_val</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></em><a class="headerlink" href="#drgn_tools.rds.RdsIbConnInfo.ib_cm_state_val" title="Link to this definition">¶</a></dt>
<dd><p>Alias for field number 3</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="drgn_tools.rds.RdsIbConnInfo.rdma_cm_state_val">
<span class="sig-name descname"><span class="pre">rdma_cm_state_val</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></em><a class="headerlink" href="#drgn_tools.rds.RdsIbConnInfo.rdma_cm_state_val" title="Link to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.rds.fields_to_list">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.rds.</span></span><span class="sig-name descname"><span class="pre">fields_to_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fields</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.rds.fields_to_list" title="Link to this definition">¶</a></dt>
<dd><p>Create a list of fields from a given string</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>fields</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – Input string containing ‘,’ seperated fields</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>List of fields</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.rds.for_each_rds_conn">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.rds.</span></span><span class="sig-name descname"><span class="pre">for_each_rds_conn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">laddr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">faddr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tos</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">states</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.rds.for_each_rds_conn" title="Link to this definition">¶</a></dt>
<dd><p>Provide the list of <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rds_connection</span></code> from the conn hash list as an iterable object</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – drgn program</p></li>
<li><p><strong>laddr</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em> | </em><em>None</em>) – </p></li>
<li><p><strong>faddr</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em> | </em><em>None</em>) – </p></li>
<li><p><strong>tos</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em> | </em><em>None</em>) – </p></li>
<li><p><strong>states</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em> | </em><em>None</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterator</span></code></a>[<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A list of <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rds_connection</span></code> as an iterable object</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.rds.for_each_rds_ib_conn">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.rds.</span></span><span class="sig-name descname"><span class="pre">for_each_rds_ib_conn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dev</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">laddr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">faddr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tos</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">states</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.rds.for_each_rds_ib_conn" title="Link to this definition">¶</a></dt>
<dd><p>Provide the list of <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rds_ib_connection</span></code> as an iterable object</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dev</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rds_ib_device</span></code> Object.</p></li>
<li><p><strong>laddr</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em> | </em><em>None</em>) – </p></li>
<li><p><strong>faddr</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em> | </em><em>None</em>) – </p></li>
<li><p><strong>tos</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em> | </em><em>None</em>) – </p></li>
<li><p><strong>states</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em> | </em><em>None</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterator</span></code></a>[<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A list of <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rds_ib_connection</span></code> as an iterable object</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.rds.for_each_rds_ib_device">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.rds.</span></span><span class="sig-name descname"><span class="pre">for_each_rds_ib_device</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.rds.for_each_rds_ib_device" title="Link to this definition">¶</a></dt>
<dd><p>Provide the list of <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rds_ib_device</span></code> as an iterable object</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – drgn program</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>[<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A List of <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rds_ib_device</span></code> as an iterable object</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.rds.for_each_rds_ib_ipaddr">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.rds.</span></span><span class="sig-name descname"><span class="pre">for_each_rds_ib_ipaddr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dev</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.rds.for_each_rds_ib_ipaddr" title="Link to this definition">¶</a></dt>
<dd><p>Provide the list of <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rds_ib_ipaddr</span></code> as an iterable object</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>dev</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rds_ib_device</span></code> Object.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>[<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A list of <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rds_ib_ipaddr</span></code> as an iterable object</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.rds.for_each_rds_sock">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.rds.</span></span><span class="sig-name descname"><span class="pre">for_each_rds_sock</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.rds.for_each_rds_sock" title="Link to this definition">¶</a></dt>
<dd><p>Provide the list of <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rds_sock</span></code> as an iterable object</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – drgn program</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code></a>[<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A list of <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rds_sock</span></code> as an iterable object</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.rds.get_connection_uptime">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.rds.</span></span><span class="sig-name descname"><span class="pre">get_connection_uptime</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conn</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.rds.get_connection_uptime" title="Link to this definition">¶</a></dt>
<dd><p>Return the time the connection was in the “UP” state..</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>conn</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rds_connection</span></code> Object.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">timedelta</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Conn up time as a string</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.rds.ib_cm_state">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.rds.</span></span><span class="sig-name descname"><span class="pre">ib_cm_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cm_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.rds.ib_cm_state" title="Link to this definition">¶</a></dt>
<dd><p>Get the IB CM state for a given RDS connection.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conn</strong> – <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">ib_cm_id</span></code> Object.</p></li>
<li><p><strong>cm_id</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><em>Object</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The RDS connection IB CM state in string format.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.rds.rdma_cm_state">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.rds.</span></span><span class="sig-name descname"><span class="pre">rdma_cm_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rdma_id_priv</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.rds.rdma_cm_state" title="Link to this definition">¶</a></dt>
<dd><p>Get the RDMA CM state for a given RDS connection.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>conn</strong> – <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rdma_id_private</span></code> Object.</p></li>
<li><p><strong>rdma_id_priv</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><em>Object</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The RDS connection RDMA CM state in string format.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.rds.rds_conn_info">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.rds.</span></span><span class="sig-name descname"><span class="pre">rds_conn_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">laddr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">faddr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tos</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ret</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">report</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.rds.rds_conn_info" title="Link to this definition">¶</a></dt>
<dd><p>Display all RDS connections</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – drgn program</p></li>
<li><p><strong>laddr</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – comma seperated string list of LOCAL-IP.  Ex: ‘192.168.X.X, 10.211.X.X, …’</p></li>
<li><p><strong>faddr</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – comma seperated string list of REMOTE-IP.  Ex: ‘192.168.X.X, 10.211.X.X, …’</p></li>
<li><p><strong>tos</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – comma seperated string list of TOS.  Ex: ‘0, 3, …’</p></li>
<li><p><strong>state</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – comma seperated string list of conn states. Ex ‘RDS_CONN_UP, CONNECTING, …’</p></li>
<li><p><strong>ret</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – If true the function returns the <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rds_ib_connection</span></code> list and None if the arg is false</p></li>
<li><p><strong>outfile</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – A file to write the output to.</p></li>
<li><p><strong>report</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – Open the file in append mode. Used to generate a report of all the functions in the rds module.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>]]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A List of <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rds_ib_connection</span></code> that match the filters provided or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.rds.rds_conn_path_state">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.rds.</span></span><span class="sig-name descname"><span class="pre">rds_conn_path_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conn</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.rds.rds_conn_path_state" title="Link to this definition">¶</a></dt>
<dd><p>Get the connection state for a given RDS connection.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>conn</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rds_connection</span></code> Object.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The RDS connection state in string format.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.rds.rds_dev_info">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.rds.</span></span><span class="sig-name descname"><span class="pre">rds_dev_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ret</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">report</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.rds.rds_dev_info" title="Link to this definition">¶</a></dt>
<dd><p>Print the IB device info</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – drgn program</p></li>
<li><p><strong>ret</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – If true the function returns the <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rds_ib_device</span></code> list and None if the arg is false</p></li>
<li><p><strong>outfile</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – A file to write the output to.</p></li>
<li><p><strong>report</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – Open the file in append mode. Used to generate a report of all the functions in the rds module.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>]]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A List of <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rds_ib_device</span></code> or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.rds.rds_get_ib_conn_info">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.rds.</span></span><span class="sig-name descname"><span class="pre">rds_get_ib_conn_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ic</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.rds.rds_get_ib_conn_info" title="Link to this definition">¶</a></dt>
<dd><p>Get the <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rds_ib_connection</span></code> specific info</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ic</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rds_ib_connection</span></code> Object</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#drgn_tools.rds.RdsIbConnInfo" title="drgn_tools.rds.RdsIbConnInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">RdsIbConnInfo</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A namedtuple of type RdsIbConnInfo</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.rds.rds_get_stats">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.rds.</span></span><span class="sig-name descname"><span class="pre">rds_get_stats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rds_stat_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fields</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.rds.rds_get_stats" title="Link to this definition">¶</a></dt>
<dd><p>Get the rds stats and counters from the stat list provided.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – drgn program</p></li>
<li><p><strong>rds_stat_list</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – The per_cpu list to get the stats from</p></li>
<li><p><strong>fields</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]]) – The list of fields to filter the results on</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>]]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A nested list of the type [[stat_name, value], …]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.rds.rds_ib_conn_ring_info">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.rds.</span></span><span class="sig-name descname"><span class="pre">rds_ib_conn_ring_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog_or_obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ic_ptr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.rds.rds_ib_conn_ring_info" title="Link to this definition">¶</a></dt>
<dd><p>Display the ring info for a particular RDS connection.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prog_or_obj</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>, <a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>]) – drgn program or <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rds_ib_connection</span></code> Object</p></li>
<li><p><strong>ic_ptr</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>]) – <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rds_ib_connection</span></code> address as an integer.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.rds.rds_inet_ntoa">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.rds.</span></span><span class="sig-name descname"><span class="pre">rds_inet_ntoa</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">addr_obj</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.rds.rds_inet_ntoa" title="Link to this definition">¶</a></dt>
<dd><p>Convert addr from sin6_addr to string</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>addr_obj</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">in6_addr</span></code> to convert to string</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the address in string form</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.rds.rds_info_verbose">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.rds.</span></span><span class="sig-name descname"><span class="pre">rds_info_verbose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">laddr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">faddr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tos</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fields</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ret</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">report</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.rds.rds_info_verbose" title="Link to this definition">¶</a></dt>
<dd><p>Print the rds conn stats similar to rds-info -Iv</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – drgn program</p></li>
<li><p><strong>laddr</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – comma seperated string list of LOCAL-IP.  Ex: ‘192.168.X.X, 10.211.X.X, …’</p></li>
<li><p><strong>faddr</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – comma seperated string list of REMOTE-IP.  Ex: ‘192.168.X.X, 10.211.X.X, …’</p></li>
<li><p><strong>tos</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – comma seperated string list of TOS.  Ex: ‘0, 3, …’</p></li>
<li><p><strong>fields</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – List of comma seperated fields to display. It also supports substring matching for the fields provided.  Ex: ‘Recv_alloc_ctr,  Cache Allocs, Tx, …’</p></li>
<li><p><strong>ret</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – If true the function returns the <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rds_ib_connection</span></code> list and None if the arg is false</p></li>
<li><p><strong>outfile</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – A file to write the output to.</p></li>
<li><p><strong>report</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – Open the file in append mode. Used to generate a report of all the functions in the rds module.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>]]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A List of <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rds_ib_connection</span></code> that match the filters provided or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.rds.rds_ip_state_list">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.rds.</span></span><span class="sig-name descname"><span class="pre">rds_ip_state_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dev</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.rds.rds_ip_state_list" title="Link to this definition">¶</a></dt>
<dd><p>The number of connections and its state associated to a rds_ib_device</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>dev</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rds_ib_device</span></code> Object.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>]]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A dictionary where IP is the key and the value is a tuple of the form (num_conns_up, num_conns)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.rds.rds_sk_rcvbuf">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.rds.</span></span><span class="sig-name descname"><span class="pre">rds_sk_rcvbuf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.rds.rds_sk_rcvbuf" title="Link to this definition">¶</a></dt>
<dd><p>Extract the rcvbuf from the socket</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>rs</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rds_sock</span></code> to extract rcvbuf</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>rcvbuf from <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rds_sock</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.rds.rds_sk_sndbuf">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.rds.</span></span><span class="sig-name descname"><span class="pre">rds_sk_sndbuf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.rds.rds_sk_sndbuf" title="Link to this definition">¶</a></dt>
<dd><p>Extract the sndbuf from the socket</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>rs</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>) – <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rds_sock</span></code> to extract sndbuf</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>sndbuf from <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rds_sock</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.rds.rds_sock_info">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.rds.</span></span><span class="sig-name descname"><span class="pre">rds_sock_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ret</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">report</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.rds.rds_sock_info" title="Link to this definition">¶</a></dt>
<dd><p>Print the rds socket info similar to rds-tools -k</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – drgn program</p></li>
<li><p><strong>ret</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – If true the function returns the <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rds_sock</span></code> list and None if the arg is false</p></li>
<li><p><strong>outfile</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – A file to write the output to.</p></li>
<li><p><strong>report</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – Open the file in append mode. Used to generate a report of all the functions in the rds module.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Object" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Object</span></code></a>]]</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A List of <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rds_sock</span></code> or None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.rds.rds_stats">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.rds.</span></span><span class="sig-name descname"><span class="pre">rds_stats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fields</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">report</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.rds.rds_stats" title="Link to this definition">¶</a></dt>
<dd><p>Print the RDS stats and counters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – drgn program</p></li>
<li><p><strong>fields</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – List of comma seperated fields to print. It also supports substring matching for the fields provided. Ex: ‘conn_reset,  ib_tasklet_call, send, …’</p></li>
<li><p><strong>outfile</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – A file to write the output to.</p></li>
<li><p><strong>report</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – Open the file in append mode. Used to generate a report of all the functions in the rds module.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="drgn_tools.rds.report">
<span class="sig-prename descclassname"><span class="pre">drgn_tools.rds.</span></span><span class="sig-name descname"><span class="pre">report</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prog</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#drgn_tools.rds.report" title="Link to this definition">¶</a></dt>
<dd><p>Generate a report of RDS related data.
This functions runs all the functions in the module and saves the results to the output file provided.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prog</strong> (<a class="reference external" href="https://drgn.readthedocs.io/en/latest/api_reference.html#drgn.Program" title="(in drgn v0.0.24+47.gff2a395)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code></a>) – drgn.Program</p></li>
<li><p><strong>outfile</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.12)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – A file to write the output to.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/drgn-tools.png" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="index.html">drgn-tools</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installing.html">Installing drgn-tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="code-quality.html">Contributing: Code Quality Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">Contributing: Testing</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-drgn_tools.bt">drgn_tools.bt</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-drgn_tools.task">drgn_tools.task</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-drgn_tools.util">drgn_tools.util</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-drgn_tools.module">drgn_tools.module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-drgn_tools.mm">drgn_tools.mm</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-drgn_tools.printk">drgn_tools.printk</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-drgn_tools.virtio">drgn_tools.virtio</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-drgn_tools.debuginfo">drgn_tools.debuginfo</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-drgn_tools.taint">drgn_tools.taint</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-drgn_tools.corelens">drgn_tools.corelens</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-drgn_tools.block">drgn_tools.block</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-drgn_tools.locking">drgn_tools.locking</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-drgn_tools.ext4_dirlock">drgn_tools.ext4_dirlock</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-drgn_tools.smp">drgn_tools.smp</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-drgn_tools.md">drgn_tools.md</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-drgn_tools.rds">drgn_tools.rds</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="testing.html" title="previous chapter">Contributing: Testing</a></li>
      <li>Next: <a href="changelog.html" title="next chapter">Changelog</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, Oracle and/or its affiliates.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="_sources/api.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>